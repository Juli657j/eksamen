(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[87258],{

/***/ 809943:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(59401);__web_req__(659506);self._88e79ef67272193100c646da570c27cc = self._88e79ef67272193100c646da570c27cc || {};(function(__c) {var Dr;var xr;var kq;var iq;var jq;var br;var Gp;var Op;var bq;var xp;var Jp;var sr;var Bp;var Mp;var zp;var ap=__c.ap;var Rp;var Qp;var mr;var lr;var Np;var jr;var ea=__c.ea;var Hp;var vp;var Rq;var Wq;var Vq;var Xq;var Tq;var Uq;var Yq;var yp;var Cp;var Pq;var Sq;var gb=__c.gb;var Qq;var hp;var gp;var fp;var Oq;var Hq;var $g=__c.$g;var zq;var yq;var xq;var wq;var rq;var pq;var cp;var Wp;var Vp;var Sp;var Kp;var up;var tp;var Ep;var Fp;var Dp;var wp;var la=__c.la;var m=__c.m;var r=__c.r;var ep;
var ka=__c.ka;
var Jpb,Kpb,dp,Lpb,Mpb,Npb,ip,Qpb,Spb,jp,kp,Vpb,Tpb,Upb,Xpb,lp,aqb,bqb,cqb,dqb,eqb,fqb,gqb,hqb,mp,np,op,iqb,jqb,pp,mqb,rp,qqb,sqb,tqb,rqb,vqb,wqb,xqb,yqb,zqb,Aqb,Lqb,Qqb,Uqb,Vqb,Wqb,arb,brb,crb,drb,erb,hrb,irb,krb,lrb,nrb,prb,qrb,Tp,srb,urb,vrb,yrb,zrb,Zp,Arb,Brb,Crb,aq,Erb,Frb,Grb,Irb,Jrb,Krb,Lrb,Nrb,Orb,lq,Zrb,mq,nq,asb,bsb,oq,esb,gsb,fsb,hsb,isb,ksb,msb,dsb,nsb,psb,osb,qsb,ssb,tsb,Aq,usb,xsb,vsb,wsb,Cq,Asb,Csb,zsb,Bsb,Dsb,Esb,ysb,Fsb,Gsb,Eq,Isb,Jsb,Ksb,Fq,Lsb,Msb,Nsb,Osb,Ssb,Kq,Jq,Tsb,Lq,Usb,Vsb,
Wsb,Xsb,Ysb,Zsb,$sb,btb,Mq,ctb,etb,Nq,ftb;Jpb=function(a){if(a==null||typeof a==="symbol")return String(a);try{return JSON.stringify(a)}catch(b){return String(a)}};cp=__c.cp=function(a,b,c){var d=[];if(a!==b)throw Error(c==null?__c.iaa("{} != {}",Jpb(a),Jpb(b)):__c.iaa(c,...d));};
Kpb=function(a,b){ka(b.length>0);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;b>1;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};dp=function(a,b,c){ka(a.Hh(b,c),"{} != {}",b,c)};Lpb=function(a,b){return new ep(b(a.bt),b(a.Ft),a.Fua,a.dBa)};
fp=__c.fp=function(a,b){return new ep(a,b,!1,!1)};gp=__c.gp=function(a){return new ep(void 0,a,!0,!1)};hp=__c.hp=function(a,b){a.Fua||(a.Fua=b.Fua);a.dBa||(a.dBa=b.dBa);return b};Mpb=function(a,b=!0){a.Fua||(a.Fua=b)};Npb=function(a,b=!0){a.dBa||(a.dBa=b)};ip=function(a){return a===1?Opb:{type:0,length:a}};Qpb=function(a){return a===1?Ppb:{type:1,length:a}};Spb=function(a){return a===1?Rpb:{type:2,length:a}};jp=function(a,b){return{type:3,state:a,shift:b}};kp=function(a,b){return{type:4,delta:a,shift:b}};
Vpb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${Tpb(a.state)})${Upb(a.shift)}`;case 4:return`U(${Tpb(a.delta)})${Upb(a.shift)}`;default:throw new r(a);}};Tpb=function(a){return a!=null?a:"\u22a5"};Upb=function(a){return a!=null?`[${a.Ah},${a.El}]`:""};
Xpb=function(a,b){return b&&a.ENa?new Wpb(a.ops.map(c=>c.type===3&&c.shift?jp(c.state,{Ah:c.shift.Ah+b,El:c.shift.El+b}):c.type===4&&c.shift?kp(c.delta,{Ah:c.shift.Ah+b,El:c.shift.El+b}):c),a.pre,a.post,a.ENa):a};lp=function(a,b){const c=m(a.Gl);if(c.type===0)return a.ZB(0,1),Ypb;if(c.type===1)return a.ZB(1,1),Zpb;if(c.type===2)return a.ZB(2,1),$pb;if(c.type!==b)throw Error();a.Gl=a.ops[a.i++];return c};aqb=function(a){return a.every(()=>!1)};
bqb=function(a,b){ka(b.length>0);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};cqb=function(a){ka(a.qJa<a.input.length,"{} >= {}",a.qJa,a.input.length);return a.input[a.qJa++]};dqb=function(a,b){b=a.qJa+b;ka(b<=a.input.length);const c=a.input.slice(a.qJa,b);a.qJa=b;return c};eqb=function(a,b){a.ijb||(a.ijb=new Set);ka(!a.ijb.has(b),"duplicate modification: {}",b);a.ijb.add(b)};fqb=function(a,b,c){eqb(a,b);(a.Zwc||(a.Zwc=new Map)).set(b,c)};
gqb=function(a,b,c){eqb(a,b);(a.Ywc||(a.Ywc=new Map)).set(b,c)};hqb=function(a,b){let {Ah:c,El:d}=b;var e=a.Zwc;a=a.Ywc;if(e){const f=e.get(c);f!=null&&(c=f,e.delete(c))}a&&(e=a.get(d),e!=null&&(d=e,a.delete(d)));return c!==b.Ah||d!==b.El?{Ah:c,El:d}:b};mp=function(a,b,c){eqb(a,b);c!=null&&(a.k5a||(a.k5a=new Map)).set(b,c)};np=function(a,b,c){(a.gPa||(a.gPa=new Map)).set(b,c)};op=function(a,b,c){(a.xOa||(a.xOa=new Map)).set(c,b)};iqb=function({Ah:a,El:b}){return{Ah:b,El:a}};
jqb=function(a,b){return a?!!b&&a.Ah===b.Ah&&a.El===b.El:!b};__c.kqb=function(a){return a.filter(()=>!0)};pp=function(a,b){ka(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};mqb=function(a,b){return a===qp?b:b===qp?a:new lqb(a,b)};rp=function(a,b){return b===qp?qp:new a(b)};qqb=function(a){a:{a={items:rp(nqb,a),tj:qp};for(b in a)if(a[b]!==qp){var b=new oqb(a);break a}b=qp}return mqb(pqb,b)};
sqb=function(a,b){la(a.bK!=null,"mutable not connected");try{a.zZ(b),a.domain.isIdentity(b)||a.z0b&&a.z0b.reportChanged()}catch(c){throw a.error(c),c;}rqb(a,b)};tqb=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};rqb=function(a,b){la(a.bK!=null);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
tp=__c.tp=function(a,b){a.Gec||(a.Gec={next:c=>{a.bK&&(a.z0b&&a.z0b.reportChanged(),rqb(a,c),a.bK.next(c))},error:c=>{a.error(c)}});return new uqb(a.Gec,b)};up=__c.up=function(a,b,c){b=a.By(b);a=a.connect(b,c);return{mutable:b,bw:a}};vp=__c.vp=function(a,b,c,d){a.destroy(d,b);c.complete()};vqb=function(a,b){let c=a.rows[b];c==null&&(c=a.rows[b]=a.Ejd++);return c};wqb=function(a,b){let c=a.cols[b];c==null&&(c=a.cols[b]=a.Cjd++);return c};
xqb=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};yqb=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(f!=null&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};zqb=function(a,b){ka(a.jO(b),"invalid value: {}",b);return b};
Aqb=function(a,b,c){if(!a.Jv(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};wp=__c.wp=function(a){return new Bqb(a)};xp=__c.xp=function(...a){return a.length===1?new Cqb(a[0]):new Dqb(new Set(a))};yp=__c.yp=function(a,b){return new Eqb(a,b,rp(nqb,a.serializer))};__c.Hqb=function(a,b){return new Fqb(a,b,rp(Gqb,b.serializer))};zp=__c.zp=function(a,b){return new Iqb(a,b)};__c.Ap=function(a,b){return new Jqb(a,b)};Bp=__c.Bp=function(a){return new Kqb(a)};
Lqb=function(a,b){ka(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return wp(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Cp=__c.Cp=function(a,b){ka(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return wp(c=>Number.isFinite(c)&&a<=c&&c<=b)};Ep=__c.Ep=function(a){return a instanceof Dp?new Mqb(a,rp(Nqb,a.serializer)):new Oqb(a,rp(Nqb,a.a9b),rp(Nqb,a.Yra))};Qqb=function(a){return new Pqb(a)};Fp=__c.Fp=function(a){return new Rqb(a,a.serializer)};Gp=__c.Gp=function(a){return new Sqb(a,a.Yra)};
Hp=__c.Hp=function(a){return Fp(Ep(a))};Uqb=function(a,b,c){return c==null||a.component.isIdentity(c)?Tqb:new Map([[b,c]])};Vqb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Wqb=function(a,b,c){const d=tp(a,g=>a.domain.update(b,g)),{mutable:e,bw:f}=up(a.type,c,d);return{eYc:{to:f,from:d},value:e}};__c.Ip=function(...a){[,a]=a.length===1?[void 0,a[0]]:a;return new Xqb(a,rp(Gqb,a.Yra))};Jp=__c.Jp=function(a){return new Yqb(a,a.serializer)};
__c.Lp=function({get:a,set:b,equals:c}){return new Zqb(Kp(a,{set:b,equals:c}))};arb=function(a,b,c){return $qb.of({...a,...b,...c})};brb=function(...a){const b=new Set;for(const c of a)for(const d in c)ka(!b.has(d),'duplicate key: "{}"',d),b.add(d)};crb=function(a,b){return tp(a,c=>({[b]:c}))};drb=function(a,b){return tp(a,c=>({[b]:c}))};
erb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Gb:{...a.Gb,...b.Gb},attributes:{...a.attributes,...b.attributes},create:e=>{const {Gb:f,attributes:g}=c(e),{Gb:h,attributes:k}=d({...e,...f,...g});return{Gb:{...f,...h},attributes:{...g,...k}}}}};Mp=__c.Mp=function(a){return frb.Nh(a)};Np=__c.Np=function(a){return a.domain.hg()};Op=__c.Op=function(a){return new __c.grb(a,qqb(a.Yra))};__c.Pp=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};
hrb=function(a,b){a=a.length;ka(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};irb=function(a,b){a=a.length;ka(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.jrb=function(a,b){return a?b?{Za:__c.Pp(a.Za,b.Za),item:__c.Pp(a.item,b.item),tj:__c.Pp(a.tj,b.tj)}:a:b};krb=function(a,b){a=a.fba;ka(0<b&&b<a,"{} \u2209 (0, {})",0,a)};lrb=function(a,b){a=a.w1;ka(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
Qp=__c.Qp=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.gX(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.f5a(c.state);case 2:return a.pra(b.state);default:throw new r(c);}default:throw new r(b);}};Rp=__c.Rp=function(a){const b=m(a.Gl);a.Gl=a.ops[a.i++];return b};__c.mrb=function(a,b){const c=m(a.Gl),d=c.fba;ka(0<b&&b<=d);if(b<d){const [e,f]=c.zSb(b);a.Gl=f;return e}a.Gl=a.ops[a.i++];return c};
nrb=function(a,b){const c=m(a.Gl),d=c.w1;ka(0<b&&b<=d);if(b<d){const [e,f]=c.ySb(b);a.Gl=f;return e}a.Gl=a.ops[a.i++];return c};prb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ka(b.type===1),new Sp(a.component.apply(b.state,c.delta));case 3:return __c.orb(a,b,c.oldState),c.newState;default:throw new r(c);}};
qrb=function(a,b,c){switch(c.type){case 0:return b;case 1:return ka(b.type===1),new Sp(a.component.Yk(b.state,c.delta));case 3:return __c.orb(a,b,c.newState),c.oldState;default:throw new r(c);}};Tp=function(a,b,c){switch(b.type){case 0:return c.type===0&&b.state===c.state;case 1:return c.type===1&&a.component.Hh(b.state,c.state);case 2:return c.type===2&&b.state===c.state;default:throw new r(b);}};__c.orb=function(a,b,c){ka(Tp(a,b,c),"{} != {}",b,c)};
__c.rrb=function(a,b){const c=__c.Up.hg(),d=a.cursor(0,{...Vp,tj:g=>c.retain(g)}),e={...Vp,Za:g=>c.retain(g.length)},f={...Vp,Za:g=>c.gX(g)};b.forEach({retain:g=>d.Xm(g,e),delete:g=>d.Xm(g,f),insert:g=>c.insert(g)});return c.build()};
srb=function(a,b){const c=new Wp,d=a.cursor();a=h=>{throw Error(String(h));};const e={...Vp,Za:h=>c.retain(h.length)},f={...Vp,Za:a},g={...Vp,Za:()=>0,tj:a};b.forEach({retain:h=>d.fR(h,e),update:h=>{throw new r(h);},insert:h=>h.type!==2&&c.insert(h.state),change:(h,k)=>{h.type===2?(d.fR(h.length,f),k.type!==2&&c.insert(k.state)):(d.fR(h.length,g),k.type===2?c.delete(h.length):(ka(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.Xp=function(a){return Object.keys(a)};
__c.Yp=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.trb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};urb=function(a,b){return{type:0,kD:a,DE:b}};vrb=function(a){return{type:1,length:a}};__c.wrb=function(a,b){return a&&b?a.gS===b.gS&&a.bP===b.bP:!a&&!b};__c.xrb=function(a,b){Object.entries(a).forEach(([c,d])=>d!=null&&b(d,c))};
yrb=function(a,b){const c=__c.Xp(a),d=__c.Xp(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.trb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.wrb(a[f].r,b[f].r))};zrb=function(a,b={}){return{type:0,length:a,changes:b}};Zp=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
Arb=function(a,b){let c=0,d=0;for(const e of a.Eea)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};Brb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new $p(d,e):a};Crb=function(a,b,c){for(const [d,e]of a){const f=Brb(e,b,c);f!==e&&a.set(d,f)}};
aq=function(a,b,c,d){for(const [e,f]of a){const g=f.gba,h=f.aba,k=g&&(b!=null?Brb(g,b,d):g),l=h&&(c!=null?Brb(h,c,d):h);k===g&&l===h||a.set(e,new Drb(k,l))}};Erb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Frb=function(a,b){cp(a,b);return a};Grb=function(a,b){return{key:a.bVa(b),value:b}};bq=__c.bq=function(a,b,c){return new Hrb(a,b,c)};Irb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
Jrb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};Krb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};Lrb=function(a){return new RegExp(`^${a}${"B"}${"[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}"}$`)};__c.Mrb=function(a){cp(a.normalize(a.defaultValue),a.defaultValue)};__c.cq=function(a,b){return b!=null?a.decode(b):void 0};
__c.dq=function(a,b){return b!=null?a.encode(b):void 0};Nrb=function(a){a=a.split("/");return a.length===2?a[0]:void 0};Orb=function(a){if(a.startsWith(`${__c.eq}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.Prb=function(a,b){if(b=Orb(b)){const [c,d]=b;if(a.Tcd(c))return[c,d]}};__c.fq=function(a,b,c,d){c=a.Xoa(c);for(const e of Object.keys(b))a.Sy(e)&&c(e)&&d(b[e],e)};__c.gq=function(a,b,c){const d={};a.copy(b,c,d);return d};
__c.Qrb=function(a,b,c){return a.attributes[c].Scd?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.Rrb=function(a,b,c){const d={};__c.fq(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.hq=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{ka(a.Sy(d)),c[d]=e!=null?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.Trb=function(a){return new Srb("block",a)};iq=__c.iq=function(a,b){return new Urb(a,b)};jq=__c.jq=function(a,b,c){return new Vrb(a,b,c)};
kq=__c.kq=function(a,b){return new Wrb(a,b,b[0])};__c.Yrb=function(a){const b=(d,e)=>{if(typeof e==="string")return d[e]?d[e]:(d=Nrb(e))&&a.nVa[d]?a.nVa[d]:(e=Orb(e))&&a.Du[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>b(d,e)!=null,ownKeys:d=>Object.keys(d)});return new __c.Xrb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.nVa)),new Set(Object.keys(a.Du)))};lq=function(a){return{type:0,length:a}};Zrb=function(a){return{type:1,length:a}};mq=function(a,b){return a.ZB(1,b).length};
nq=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return $rb;ka(c[0]>=0);b=new Map;a=a.ld(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){la(c!=null);switch(c.type){case 0:c=a.zy(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=mq(a,c.length);break;default:throw new r(c);}c=a.head}c&&c.type===1&&(e+=mq(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
asb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return $rb;ka(c[0]>=0);b=new Map;a=a.ld(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){la(c!=null);switch(c.type){case 0:c=a.zy(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=mq(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};bsb=function(a){return JSON.stringify(a,(b,c)=>c!=null?c:null)};oq=function(a){return new csb(a.NBd)};
esb=function(a,b,c,d){var e=Math.max(a.Fp,b.Fp),f=Math.max(a.qz,b.qz);a=a.ld(void 0,e,f);b=b.ld(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&e.type===0||f&&f.type===0){const n=a.kw(),p=b.kw(),q=c.kw();e=n;f=p;for(var g=q,h=d,k=e.head,l=f.head;k||l;){if(k&&k.type===0||l&&l.type===0){k=e.Nu();l=f.Nu();for(const u of dsb(k,l))g.sl(u,h(u,e.attrs[u],f.attrs[u]))}else if(k&&l)k=Math.min(k.length,l.length),e.sn(k),f.sn(k),g.EA(k);else throw Error(`length mismatch: ${k} x ${l}`);k=e.head;l=f.head}n.finish();
p.finish();q.finish()}else if(e&&f)e=Math.min(e.length,f.length),pq(a,e),pq(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};gsb=function(a,b,c,d){return qq.isIdentity(c)&&qq.isIdentity(d)||b.items.isEmpty()?b:fsb("apply",a.NBd,b,c,d)};
fsb=function(a,b,c,d,e){const f=new rq,[g,h]=a==="apply"?[c.items.ld(e.pre),e.ld(c.items.length,0)]:[c.items.ld(e.post),e.ld(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&k.type===1)mq(h,k.length),a==="apply"?f.yc(k.length):g.sn(k.length);else if(e&&e.type===0){e=g.Nu();const [n,p]=a==="apply"?[e.ld(d.pre),d.ld(e.length,0)]:[e.ld(d.post),d.ld(0,e.length)];e=a;k=new rq;var l=n.head;let q=p.head;for(;l||q;){if(q&&q.type===1)mq(p,q.length),e==="apply"?k.yc(q.length):n.sn(q.length);else if(l)l.type===
0?k.grad(n.Nu()):q?(l=Math.min(l.length,q.length),n.sn(l),p.zy(l),k.yc(l)):(n.sn(l.length),k.yc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.sn(e),h.zy(e),f.yc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return wq.of(b,a,c,a.length)};hsb=function(a){return{type:1,length:a}};
pq=__c.pq=function(a,b){la(a.TV==null);return a.mVa.sn(b)};isb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.ac,d.ac)&&a(b,c.r,d.r):!1};__c.jsb=function(a,b,c,d){if(!d)return c;ka(a(b,c,d.ac),"{} != {}",c,d.ac);return d.r};ksb=function(a,b,c,d){return isb(a,b,c,d)?void 0:{t:c,b:d}};
__c.lsb=function(a,b,c){const d={};if(b&&c)for(const f of dsb(b,c)){var e=ksb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of xq(b))(c=ksb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of xq(c))(b=ksb(a,f,void 0,c[f]))&&(d[f]=b);return yq(d)?void 0:d};msb=function(a,b,c){return dsb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?isb(a,d,e.t,f.t)&&isb(a,d,e.b,f.b):!1})};xq=__c.xq=function(a){return Object.keys(a)};
dsb=function(a,b){return a&&b?[...(new Set([...xq(a),...xq(b)]))]:a?xq(a):b?xq(b):[]};yq=__c.yq=function(a){return xq(a).length===0};nsb=function(a,b,c,d){const e=__c.hq(a.Kg,__c.gq(a.Kg,b,d)),f=__c.Rrb(a.Kg,e,(h,k)=>__c.Qrb(a.Kg,e,k)),g={};__c.fq(a.Kg,f,b,(h,k)=>{g[k]={o:c&&c[k],n:f[k]}});return g};psb=function(a,b){b.forEach(a.Kg.Sy,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};osb(e,(h,k)=>{h!=null&&(la(a.Kg.CCa(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};
osb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};qsb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};zq=__c.zq=function(a,b,c,d){la(0<=a);la(0<=b);la(a<=c);la(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.rsb=function(a,b){return{span:a,state:b}};ssb=function(a){const b=a.rows[a.y];if(b!=null)for(;b.cells[a.x]==null&&a.x<b.cells.length;)a.x++};tsb=function(a){for(;a.rows[a.y]==null&&a.y<a.rows.length;)a.y++};
Aq=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
usb=function(a,b,c,d){if(qq.isIdentity(c)&&qq.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=nq(c,e),h=nq(d,f),k=new Bq;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
xsb=function(a,b,c){const d=new Bq;vsb(b.ld(),c.ld(),(e,f,g,h)=>{b==null&&c==null||d.add(e,f,wsb(a,g,h))});return d.build()};vsb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=d==null?1:e==null?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(d<0){const {x:f,y:g,value:h}=a.Gr();c(f,g,h,void 0)}else if(d>0){const {x:f,y:g,value:h}=b.Gr();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.Gr();({value:d}=b.Gr());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
wsb=function(a,b,c){if(b==null)return c;if(c==null)return b;switch(b.type){case 0:a:switch(c.type){case 1:la(b.n!=null);c.bounds&&la(Aq(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:la(Cq(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&la(Aq(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:la(c.o!=null);b.bounds&&la(Aq(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Yk(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Cq=function(a,b,c){return b===c?!0:b&&c?Aq(b,c)&&a.component.Hh(b.state,c.state):!1};
Asb=function(a,b,c,d,e,f){const g=d.type===0?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.kHd);n<=h;n++)ysb(f,n*2),f.kw(),f.S6b((p,q)=>{e.append(zq(p,q,p,q))}),f.Bdb();f.kHd<=h&&ysb(f,(h+1)*2);if(g==null)return{o$a:b}=zsb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {o$a:k,vPb:l}=zsb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);la(d.type===0);return a.replace(d.n,void 0)}};
Csb=function(a,b){Bsb(a,b.left,b.top);a.append(b)};zsb=function(a,b){Bsb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{o$a:!0,vPb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{o$a:!0,vPb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{o$a:!0,vPb:{right:c,bottom:d}};d=e}return{o$a:!1,vPb:void 0}};
Bsb=function(a,b,c){c>a.Dda&&(a.buffer.splice(0,c-a.Dda),a.Dda=c,a.gta=0);b>a.gta&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.gta),a.gta=b)};Dsb=function(a,b,c){c-=a.Dda;a=c===0?b-a.gta:b;la(c>=0&&a>=0);return{dHd:a,hHd:c}};Esb=function(a){const b=qq.hg();a=a.ld();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(c.length*2);a.zy(c.length);break;case 1:b.expand(c.length*2);mq(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
ysb=function(a,b){for(la(b>=a.Jka);b>a.Jka;){var c=a.ld.head;la(c!=null);c.type===0?(a.kw(),a.Bdb()):(c=Math.min(c.length,b-a.Jka),pq(a.ld,c),a.Jka+=c)}};Fsb=function(a,b){const c=new Bq,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);g==null||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.Xb(g.value)},void 0)))}return a.domain.je({cells:c.build()})};
Gsb=function(a,b){return c=>{const {left:d,top:e}=b.jnd.get();return a.domain.je({cells:(new Bq).add(d,e,a.domain.update(void 0,c)).build()})}};Eq=function(a,b,c,d){a.Lj.set(b,new Dq(c,d));return a};Isb=function(a,b,c,d){a.Lj.set(b,new Hsb(c,d));return a};Jsb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
Ksb=function(a,b){if(qq.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:e.oldValue!=null&&c.add(e.oldValue);e.newValue!=null&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=nq(b,c);return $g(a,e=>{switch(e.type){case 0:return new Dq(e.oldValue!=null?m(d.get(e.oldValue)):void 0,e.newValue!=null?m(d.get(e.newValue)):void 0);case 1:return new Hsb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Fq=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};Lsb=function(a){la(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};Msb=function(a){const b=new Map;for(const [c,d]of a)a=Fq(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};Nsb=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=Lsb(c),e=Fq(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Gq.from({start:f,end:g}))}if(a.size)throw Error();return b};
Osb=function(a){const b=Hq.hg();for(const [d,e]of a.Ae)switch(e.type){case "replace":var c=Fq(d);Eq(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Eq(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Fq(d);e.start&&Isb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&Isb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Hq.je(a.axis,b.build().Lj)};
Ssb=function(a){const b=new Map,c=new Map(a.Lj);for(const [f,g]of c){const h=Lsb(f),k=Fq(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));la(d.type===g.type);la(e.type===g.type);la(d.oldValue!=null===(e.oldValue!=null));la(d.newValue!=null===(e.newValue!=null));c.delete(k.start);c.delete(k.end);b.set(h,new Psb(d.oldValue!=null&&e.oldValue!=null?Gq.from([d.oldValue,e.oldValue]):void 0,d.newValue!=null&&e.newValue!=null?Gq.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&la(d.type===g.type);e&&la(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new Qsb(d?Iq.from(d):void 0,e?Iq.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return Rsb.create(a.axis,b)};Kq=function(a,b,c){const {x:d,y:e,...f}=a;ka(qq.Dj(d,Jq(b)));ka(qq.Dj(e,Jq(c)));return f};
Jq=function(a){const b=qq.hg();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};Tsb=function(a,b){let c=a.items[b];c==null&&(c=a.items[b]={});return c};Lq=function(a,b){if(b!=null)return m(a.ndd.get(b))};Usb=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.exa(d));d++);return c};
Vsb=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.dxa(d));d++);return c};Wsb=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.exa(d));d--);return c};Xsb=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.dxa(d));d--);return c};Ysb=function(a,b){const c=a.w_(b.Zf),d=a.j2(b.cg),e=a.w_(b.Ej||b.Zf);a=a.j2(b.Ak||b.cg);ka(c!=null&&d!=null&&e!=null&&a!=null);ka(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};Zsb=function(...a){return b=>{for(const c of a){const d=c(b);if(d)return d}}};
$sb=function(a){return b=>{const c=[];if(b==="")return{s:b,value:c};for(;;){const d=a(b);if(!d||d.s===b)return{s:b,value:c};c.push(...d.value);b=d.s}}};
btb=function(a){const b=a.DP,c=__c.Lp({get:()=>b.cols.reduce((n,p)=>n+p.width,0),set:n=>{la(n>0);n/=c.value;for(const p of b.cols)p.width*=n}}),d=__c.Lp({get:()=>b.rows.reduce((n,p)=>n+p.height,0),set:n=>{la(n>0);n/=d.value;for(const p of b.rows)p.height*=n,p.minHeight=p.height}}),e=Kp(()=>{const n=new Map;for(const p of b.cols)n.set(p.id,p);return n}),f=Kp(()=>{const n=new Map;for(const p of b.rows)n.set(p.id,p);return n}),g=atb(n=>b.rows.has(n)?(n=b.rows.zj(n))?g(n)+1:0:-1),h=atb(n=>b.cols.has(n)?
(n=b.cols.zj(n))?h(n)+1:0:-1),k=atb(n=>(n=b.cols.zj(n))?k(n)+n.width:0),l=atb(n=>(n=a.DP.rows.zj(n))?l(n)+n.height:0);return{attributes:{width:c,height:d},Gb:{layout:b,rows:b.rows,cols:b.cols,Knb:n=>f.get().get(n),m$a:n=>e.get().get(n),G2a:n=>b.rows.Vec(n),JTa:n=>b.cols.Vec(n),i2:g,v_:h,zc:k,Ac:l}}};Mq=__webpack_require__(519427);ctb=Mq._isComputingDerivation;__c.dtb=Mq.comparer;Kp=__c.Kp=Mq.computed;etb=Mq.createAtom;Nq=Mq.observable;ftb=Mq.ObservableMap;__c.gtb=__webpack_require__(481922).C;__c.htb=__webpack_require__(119930).xQ;__c.itb=__webpack_require__(497827).h;__c.jtb=__webpack_require__(318386).U;var ktb,atb;ktb=__webpack_require__(635872);__c.ltb=ktb.Om;atb=ktb.kq;var otb,ptb,rtb,ttb;__c.mtb=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;__c.ntb=/^#[0-9a-f]{6}$/;otb=/^#[0-9a-f]{6}$|^transparent$/;ptb=/^#[0-9a-f]{6}$|^inherit$/;__c.qtb=/^[0-9]+(\.[0-9]+)?$/;rtb=/^[0-9]+(\.[0-9]+)?px$|^inherit$/;__c.stb=/^-?[0-9]+(\.[0-9]+)?%$/;ttb=/^(([1-9]|10)( ([1-9]|10)){0,9})?$|^inherit$/;var utb,vtb;Oq=__c.Oq=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new utb(this,a,b,c,d)}};
utb=class extends Oq{isIdentity(a){return this.component.isIdentity(this.r3(a))}compose(a,b){return this.OKa(this.component.compose(this.r3(a),this.r3(b)))}transform(a,b){a=this.component.transform(this.r3(a),this.r3(b));return Lpb(a,c=>this.OKa(c))}Lk(a){return this.OKa(this.component.Lk(this.r3(a)))}Dj(a,b){return a===b||this.component.Dj(this.r3(a),this.r3(b))}identity(a){return this.OKa(this.component.identity(this.Rja(a)))}apply(a,b){const c=this.Rja(a);b=this.component.apply(c,this.r3(b));return c===
b?a:this.xib(b)}Yk(a,b){const c=this.Rja(a);b=this.component.Yk(c,this.r3(b));return c===b?a:this.xib(b)}Hh(a,b){return a===b||this.component.Hh(this.Rja(a),this.Rja(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.OKa=b;this.r3=c;this.xib=d;this.Rja=e}};ep=__c.ep=class{static Rq(){return new vtb}constructor(a,b,c,d){this.bt=a;this.Ft=b;this.Fua=c;this.dBa=d}};vtb=class{build(a,b){return new ep(a,b,this.Fua,this.dBa)}constructor(){this.dBa=this.Fua=!1}};var wtb=class extends Oq{isIdentity(){return!0}compose(){}transform(){return fp()}Lk(){}Dj(){return!0}identity(){}apply(a){return a}Yk(a){return a}Hh(a,b){return this.Jv(a,b)}equals(a){return this===a}constructor(a){super();this.Jv=a}};var Pqb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},xtb=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},ytb=class extends Oq{update(a){return this.component.isIdentity(a)?void 0:new Pqb(a)}replace(a,b){return new xtb(a,b)}isIdentity(a){return a==null||a.type===0&&this.component.isIdentity(a.delta)}compose(a,b){if(a==null)return b;if(b==null)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Yk(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return dp(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(a==null||b==null)return fp(b,a);switch(a.type){case 0:switch(b.type){case 0:return Lpb(this.component.transform(a.delta,b.delta),c=>
this.update(c));case 1:return a=this.component.apply(b.oldState,a.delta),new ep(this.replace(a,b.newState),void 0,!1,!0);default:throw new r(b);}case 1:switch(b.type){case 0:return b=this.component.apply(a.oldState,b.delta),gp(this.replace(b,a.newState));case 1:return dp(this.component,a.oldState,b.oldState),gp(this.replace(b.newState,a.newState));default:throw new r(b);}default:throw new r(a);}}Lk(a){if(a==null)return a;switch(a.type){case 0:return this.update(this.component.Lk(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}Dj(a,b){return a===b?!0:a==null||b==null?a===b:a.type===0&&b.type===0?this.component.Dj(a.delta,b.delta):a.type===1&&b.type===1?this.component.Hh(a.oldState,b.oldState)&&this.component.Hh(a.newState,b.newState):!1}identity(){}apply(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return dp(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Yk(a,b){if(b==null)return a;switch(b.type){case 0:return this.component.Yk(a,
b.delta);case 1:return dp(this.component,a,b.newState),b.oldState;default:throw new r(b);}}Hh(a,b){return this.component.Hh(a,b)}equals(a){return this===a||a instanceof ytb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var ztb=class extends Oq{isIdentity(a){return a==null||this.component.isIdentity(a)}compose(a,b){ka(a==null===(b==null));return a!=null&&b!=null?this.component.compose(a,b):void 0}transform(a,b){ka(a==null===(b==null));return a!=null&&b!=null?this.component.transform(a,b):fp(b,a)}Lk(a){return a!=null?this.component.Lk(a):void 0}Dj(a,b){return a!=null&&b!=null&&this.component.Dj(a,b)||a==null&&b==null}identity(a){return a!=null?this.component.identity(a):void 0}apply(a,b){ka(a==null===(b==null));return a!=
null&&b!=null?this.component.apply(a,b):void 0}Yk(a,b){ka(a==null===(b==null));return a!=null&&b!=null?this.component.Yk(a,b):void 0}Hh(a,b){return a===b||a!=null&&b!=null&&this.component.Hh(a,b)}equals(a){return this===a||a instanceof ztb&&this.component.equals(a.component)}constructor(a){super();this.component=a;ka(!(a instanceof ztb))}};var Opb={type:0,length:1},Ppb={type:1,length:1},Rpb={type:2,length:1},Zpb=jp(),Ypb=kp(),$pb=kp(new xtb),Wpb=class{toString(){return this.ops.map(Vpb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.ENa=d}},Atb=new Wpb([],0,0,0),Btb=class{c8(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(ip(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Qpb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(Spb(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ka(b>=0,"{} < 0",b);b&&(this.c8(a),this.acc+=b);return this}dPb({Ah:a,El:b}){const c=this.ops.length,d=this.n7||(this.n7=new Map),e=this.rAa||(this.rAa=new Map);ka(!d.has(a),"duplicate record: {}",a);ka(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.pra(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Ah===c.El&&(c=void 0,a=jp(b)),b==null&&c==null))return this.expand();this.c8(a.type);c&&this.dPb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.Ah===c.El&&(c=void 0,a=kp(b)),b==null){if(c==null)return this.retain()}else if(b.type===1&&b.oldState==null&&b.newState==null&&c==null)return this.pra();this.c8(a.type);c&&this.dPb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return a==
null||typeof a==="number"?this.accumulate(0,a):this.append(kp(void 0,a))}expand(a){return a==null||typeof a==="number"?this.accumulate(1,a):this.append(jp(void 0,a))}pra(a){return a==null||typeof a==="number"?this.accumulate(2,a):this.append(kp(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(jp(a,b))}update(a,b){return this.append(kp(a!=null?this.component.update(a):void 0,b))}f5a(a){return this.append(kp(this.component.replace(void 0,a)))}gX(a){return this.append(kp(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(kp(this.component.replace(a,b),c))}build(a){this.mode!==0&&this.c8();if(a&&a.zKc())return a.Hdc(this.ops);if(!this.n7&&!this.rAa)return new Wpb(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.n7);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Ah),f=g.get(d.El);if(e!==d.Ah||f!==d.El)a[h]=jp(c.state,{Ah:e,El:f});break;case 4:d=
c.shift;e=g.get(d.Ah);f=g.get(d.El);if(e!==d.Ah||f!==d.El)a[h]=kp(c.delta,{Ah:e,El:f});break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${Vpb(c)}`);default:throw new r(c);}}return new Wpb(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.rAa=this.n7=this.mode=void 0}},Ctb=class{static create(a,b,c){ka(b>=0,"{} < 0",b);ka(c>=0,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,ip(b)]:a.ops;return new Ctb(a)}get head(){return this.Gl}ZB(a,
b=1){const c=m(this.Gl);if(c.type!==a)throw Error();const d=c.length;ka(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Gl=ip(d-b),ip(b);case 1:return this.Gl=Qpb(d-b),Qpb(b);case 2:return this.Gl=Spb(d-b),Spb(b);default:throw new r(a);}else return this.Gl=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.Gl=a[this.i++]}},Dtb=class{dPb(a,{Ah:b,El:c}){const d=this.n7||(this.n7=new Map),e=this.rAa||(this.rAa=new Map);la(!d.has(b),"already recorded: {}",b);la(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.dPb(a,b):a!=null&&(this.list[this.length]=a);this.length++;return this}expand(a=1){ka(a>=0,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.n7||this.rAa){const c=m(this.n7);var b=m(this.rAa);cp(c.size,b.size);for(const [d,e]of b)la(c.has(d),"recall has no record: {}",d),b=c.get(d),b!=null&&(a[e]=b)}this.w4c!=null&&cp(this.length,this.w4c);return a}constructor(a){this.w4c=a;this.list=[];this.length=
0;this.rAa=this.n7=void 0}},Etb=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new Etb(a)}finish(){cp(this.qJa,this.input.length)}constructor(a){this.input=a;this.qJa=0}},Ftb=class{zKc(){return!!this.ijb}Hdc(a){const b=new Btb(this.component);for(const c of a)switch(c.type){case 3:b.append(this.N5c(c));break;case 4:b.append(this.O5c(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.Ywc=this.Zwc=this.ijb=
void 0}},Gtb=class extends Ftb{N5c(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.k5a&&this.k5a.get(c.Ah);d=this.component.apply(b,d);const e=hqb(this,c);return d!==b||e!==c?jp(d,e):a}O5c(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.k5a&&this.k5a.get(c.Ah);d=this.component.compose(b,d);const e=hqb(this,c);return d!==b||e!==c?kp(d,e):a}constructor(...a){super(...a);this.k5a=void 0}},Htb=class extends Ftb{zKc(){return super.zKc()||!!this.xOa||!!this.gPa}N5c(a){if(!a.shift)return a;
const b=a.shift,c=hqb(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}O5c(a){const b=a.delta,c=a.shift;var d=this.xOa;if(d){var e=d.get(a);if(e==null)e=a.delta;else{d.delete(a);d=m(this.gPa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&hqb(this,c);return e!==b||d!==c?kp(e,d):a}Hdc(a){a=super.Hdc(a);if(this.xOa&&this.xOa.size)throw Error(`unconsumed setSurrogates: ${[...this.xOa.values()]}`);if(this.gPa&&this.gPa.size)throw Error(`unconsumed subSurrogates: ${[...this.gPa.keys()]}`);
return a}constructor(...a){super(...a);this.gPa=this.xOa=void 0}},Itb=class extends Oq{hg(){return new Btb(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.hg(),e=new Gtb(c),f=Ctb.create(a,0,b.pre),g=Ctb.create(Xpb(b,a.ENa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(k.type===1)d.append(g.ZB(k.type,k.length));else if(k.type===3)d.append(lp(g,k.type));else if(h)if(h.type===1)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.ZB(h.type,l);g.ZB(k.type,l);d.append(Qpb(l));break;case 4:l=lp(f,h.type);k=lp(g,k.type);h=k.shift;d.append(jp(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(h.type===3){l=lp(f,h.type);k=lp(g,k.type);h=l.shift;var n=k.shift;h==null?d.append(jp(c.apply(l.state,k.delta),n)):n==null?(d.append(l),
mp(e,h.El,k.delta)):(d.append(jp(l.state,{Ah:h.Ah,El:n.El})),mp(e,h.El,k.delta),gqb(e,n.Ah,h.El))}else h.type===4||k.type===4?(k=lp(f,4),l=lp(g,4),h=k.shift,n=l.shift,h==null?d.append(kp(c.compose(k.delta,l.delta),n)):n==null?(d.append(k),mp(e,h.El,l.delta)):(d.append(kp(k.delta,{Ah:h.Ah,El:n.El})),mp(e,h.El,l.delta),gqb(e,n.Ah,h.El))):(l=Math.min(h.length,k.length),h=f.ZB(h.type,l),k=g.ZB(k.type,l),d.append(h.type===2||k.type===2?Spb(l):ip(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return fp(b,a);const c=this.component,d=Ctb.create(a,b.pre,0),e=Ctb.create(Xpb(b,a.ENa),a.pre,0),f=this.hg(),g=this.hg(),h=ep.Rq(),k=new Htb(c),l=new Htb(c);for(var n=d.head,p=e.head;n||p;){if(n&&n.type===3)if(p=lp(d,n.type),p.shift){var q=p.shift;n=kp();g.append(n,"nocollapse");f.append(p);op(k,q.El,n);np(k,q.Ah)}else g.append(Opb),f.append(p);else if(n&&n.type===1)p=d.ZB(n.type,n.length),g.append(ip(p.length)),f.append(p);
else if(p&&p.type===3)if(p=lp(e,p.type),p.shift){n=p.shift;q=n.Ah;n=n.El;var u=-q-1,w=kp(void 0,{Ah:-n-1,El:n});g.append(p);f.append(w);op(l,n,w);np(l,q);fqb(l,u,q)}else g.append(p),f.append(Opb);else if(p&&p.type===1)q=e.ZB(p.type,p.length),g.append(q),f.append(ip(p.length));else if(n&&p)if(n.type===4||p.type===4){q=lp(d,n.type);n=lp(e,p.type);const {bt:x,Ft:z}=hp(h,c.transform(q.delta,n.delta));p=q.shift;n=n.shift;if(p)if(n){q=n.Ah;n=n.El;u=p.Ah;p=p.El;w=-q-1;const B=kp(void 0,{Ah:-n-1,El:n}),C=
kp(void 0,{Ah:q,El:n});g.append(C);f.append(B);op(k,p,C);op(l,n,B);np(k,u,x);np(l,q,z);fqb(l,w,u);gqb(l,q,p)}else q=p.Ah,n=p.El,u=kp(),g.append(u,"nocollapse"),f.append(kp(z,p)),op(k,n,u),np(k,q,x);else n?(p=n.Ah,q=n.El,u=-p-1,w=kp(void 0,{Ah:-q-1,El:q}),g.append(kp(x,n)),f.append(w),op(l,q,w),np(l,p,z),fqb(l,u,p)):(g.append(kp(x)),f.append(kp(z)))}else q=Math.min(n.length,p.length),n=d.ZB(n.type,q),p=e.ZB(p.type,q),n.type===2&&p.type===2?g.append(ip(p.length)):g.append(p),f.append(n);else throw Error(`length mismatch (${a} x ${b})`);
n=d.head;p=e.head}return h.build(g.build(k),f.build(l))}Lk(a){if(!a.ops.length)return a;const b=this.hg(),c=new Gtb(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.Lk(d.delta);const e=d.shift&&iqb(d.shift);e?(b.retain(e),mp(c,e.El,a)):b.append(kp(a));break;case 3:a=d.shift&&iqb(d.shift);d.state!=null?a?(b.retain(a),mp(c,a.El,this.component.replace(d.state,void 0))):b.gX(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}Dj(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.Asc(a.ops[c],b.ops[c]))return!1;return!0}Asc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.Hh(a.state,b.state)&&jqb(a.shift,b.shift);case 4:return a.type===b.type&&this.component.Dj(a.delta,b.delta)&&jqb(a.shift,b.shift);default:throw new r(a);}}$f(a){return new Dtb(a)}identity(){return Atb}apply(a,
b){if(!b.ops.length)return a;const c=Etb.create(a,b.pre),d=new Dtb(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,ip(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:bqb(d,dqb(c,e.length));break;case 1:d.expand(e.length);break;case 2:la(aqb(dqb(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(cqb(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Yk(a,b){if(!b.ops.length)return a;
const {unshift:c,Qbf:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=Etb.create(a,b.post),f=new Dtb(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,ip(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:bqb(f,dqb(e,g.length));break;case 1:la(aqb(dqb(e,g.length)));break;case 2:la(aqb(dqb(e,g.length)));f.expand(g.length);break;case 3:dp(this.component,g.state,cqb(e));break;case 4:f.append(this.component.Yk(cqb(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.hg(),c=this.hg();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(ip(d.length));c.append(d);break;case 4:d.shift?(b.retain(iqb(d.shift)),c.append(kp(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(iqb(d.shift)),c.append(jp(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),Qbf:c.build()}}Hh(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.Hh(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof Itb&&this.component.equals(a.component)}constructor(a){super();this.component=new ytb(new ztb(a))}};var qp,lqb,Jtb,nqb,pqb,Gqb,oqb,Nqb;qp=Object.freeze({serialize:a=>a,deserialize:a=>a});Pq=__c.Pq=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});lqb=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
Jtb=class{get serializer(){this.wPc==null&&(this.wPc=this.xse());return this.wPc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.xse=a}};nqb=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
pqb=Object.freeze({serialize(a){let b=0,c=0;const d=__c.kqb(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,tj:e}},deserialize({items:a,tj:b}){const c=[];let d=0;for(const e of b)e<0?d+=-e:e>0&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});Gqb=class{serialize(a){return $g(a,b=>this.serializer.serialize(b))}deserialize(a){return $g(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
oqb=class{serialize(a){return pp(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return pp(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};Nqb=class{serialize(a){return a!=null?this.serializer.serialize(a):void 0}deserialize(a){return a!=null?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new Pqb(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new xtb(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var Ktb,Ltb,uqb,Mtb,Ntb,Otb;Ktb={next:()=>{},error:()=>{}};Ltb=class{next(a){this.closed||this.o.next(this.f(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};uqb=class extends Ltb{error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){super(a,b);this.o=a;this.f=b}};Mtb=class extends Ltb{complete(){this.closed||(this.closed=!0,this.o.complete())}constructor(a,b){super(a,b);this.o=a;this.f=b}};Ntb=class{create(a,b=__c.gtb,c=Ktb){a=this.By(a);b.subscribe(this.connect(a,c));return a}};
Qq=__c.Qq=class extends Ntb{map(a,b,c,d,e,f){return new Otb(this,a,b,c,d,e,f,mqb({serialize:b,deserialize:a},this.a9b),mqb({serialize:d,deserialize:c},this.Yra))}constructor(a,b){super();this.a9b=a;this.Yra=b}};
Otb=class extends Qq{By(a){return this.$Fe(this.component.By(this.Rja(a)))}connect(a,b){b=new uqb(b,this.OKa);a=this.component.connect(this.ZUb(a),b);return new Mtb(a,this.r3)}Xb(a){return this.xib(this.component.Xb(this.ZUb(a)))}destroy(a,b){return this.component.destroy(this.ZUb(a),this.Rja(b))}pi(a,b){return this.component.pi(this.ZUb(a),this.Rja(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.OKa=b;this.r3=c;this.xib=d;this.Rja=e;this.$Fe=f;this.ZUb=g;this.domain=this.component.domain.map(this.OKa,
this.r3,this.xib,this.Rja)}};Rq=__c.Rq=class{connect(a){la(this.bK==null);this.bK=a;return{next:b=>{this.bK&&sqb(this,b)},complete:()=>this.complete()}}Xb(){return this.iT()}complete(){this.bK&&(this.bK=void 0,tqb(this,"mutable disconnected"))}error(a){this.bK&&(this.bK.error(a),this.bK=void 0,tqb(this,"mutable failure"))}jq(a){var b;sqb(this,a);this.domain.isIdentity(a)||(b=this.bK)===null||b===void 0||b.next(a)}constructor(){this.clients=this.Gec=this.bK=void 0}};var Ptb;Sq=__c.Sq=class{get(){this.DW.reportObserved();return this.value}set(a){__c.dtb.identity(this.value,a)||(this.value=a,this.DW.reportChanged())}constructor(a){this.value=a;this.DW=etb("")}};
Ptb=class{static F(a){gb(a,{gyc:Kp,f6b:Kp})}get Fp(){return this.cols.length}get qz(){return this.rows.length}get gyc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get f6b(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.pZ(a,b));c==null&&ctb()&&(c=new Sq,this.values.set(this.pZ(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];d==null&&(d=this.rows[a]=this.Ejd++);a=this.cols[b];
a==null&&(a=this.cols[b]=this.Cjd++);(b=this.values.get(this.pZ(d,a)))?b.set(c):this.values.set(this.pZ(d,a),new Sq(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(a!=null&&b!=null){var c=this.values.get(this.pZ(a,b));c&&c.set(void 0);this.values.delete(this.pZ(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.pZ(c,d));b!=null&&(b=b.get(),b!=null&&a(b,c,d))}}pZ(a,b){return`${a}:${b}`}constructor(){this.Ejd=(Ptb.F(this),0);this.Cjd=0;this.rows=Nq.array([],
{deep:!1});this.cols=Nq.array([],{deep:!1});this.values=new Map}};var Qtb,Cqb,Dqb,Bqb,Eqb,Fqb,Rtb,Iqb,Jqb,Mqb,Kqb,Utb,Wtb,Xtb,Ytb;Dp=__c.Dp=class{constructor(a){this.serializer=a}};Qtb=class extends Dp{Jv(a,b){return a===b}stringify(a){return JSON.stringify(a)}};Cqb=class extends Qtb{jO(a){return a===this.value}constructor(a){super(qp);this.value=a}};Dqb=class extends Qtb{jO(a){return this.values.has(a)}constructor(a){super(qp);this.values=a}};Bqb=class extends Qtb{constructor(a){super(qp);this.jO=a}};
Eqb=class extends Dp{jO(a){return a.every(b=>this.type.jO(b))&&(!this.A7a||this.A7a(a))}Jv(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.Jv(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.A7a=b}};
Fqb=class extends Dp{jO(a){return[...a].every(this.rAe)}Jv(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),a==null||!this.valueType.Jv(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.rAe=([d,e])=>Rtb.every(f=>!d.includes(f))&&this.keyType.jO(d)&&this.valueType.jO(e)}};Rtb=["$",".","\x00"];
Iqb=class extends Dp{jO(a){return this.keys.every(b=>this.fields[b].jO(a[b]))&&(!this.A7a||this.A7a(a))}Jv(a,b){return this.keys.every(c=>this.fields[c].Jv(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(Pq);this.fields=a;this.A7a=b;this.keys=Object.keys(this.fields)}};
Jqb=class extends Dp{jO(a){return this.hL[this.rAb(a)].jO(a)}Jv(a,b){const c=this.rAb(a),d=this.rAb(b);return c===d&&this.hL[c].Jv(a,b)}stringify(a){return this.hL[this.rAb(a)].stringify(a)}constructor(a,b){super(Pq);this.hL=a;this.rAb=b}};Mqb=class extends Dp{jO(a){return a==null||this.type.jO(a)}Jv(a,b){return a!=null?b!=null&&this.type.Jv(a,b):b==null}stringify(a){return a!=null?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
Kqb=class extends Qtb{jO(a){return typeof a==="string"&&this.NXe.test(a)}constructor(a){super(qp);this.NXe=a}};Tq=__c.Tq=wp(a=>typeof a==="boolean");Uq=__c.Uq=wp(a=>typeof a==="string");__c.Stb=wp(a=>a.length===1);__c.Ttb=Lqb(-2147483648,2147483647);Utb=wp(a=>Number.isSafeInteger(a));Vq=__c.Vq=Lqb(0,2147483647);__c.Vtb=Lqb(1,2147483647);Wq=__c.Wq=Lqb(0,Number.MAX_SAFE_INTEGER);Xq=__c.Xq=wp(a=>Number.isFinite(a));Yq=__c.Yq=Cp(0,Number.MAX_VALUE);Wtb=wp(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
Xtb=yp(Yq);Ytb=yp(Uq);var Ztb,Oqb;Ztb={next:a=>ka(a==null),complete:()=>{}};
Oqb=class extends Qq{By(a){return a!=null?this.type.By(a):void 0}connect(a,b){if(a==null)return Ztb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}Xb(a){return a!=null?this.type.Xb(a):void 0}destroy(a,b){if(a!=null&&b!=null)this.type.destroy(a,b);else if(a!=null||b!=null)throw Error(`${this.Xb(a)} != ${b}`);}pi(a,b){return a!=null?b!=null&&this.type.pi(a,b):b==null}constructor(a,b,c){super(b,c);this.type=a;this.domain=new ztb(this.type.domain)}};__c.Zq=Ep(Uq);
__c.$tb=Ep(Tq);Ep(__c.Ttb);Ep(Utb);__c.$q=Ep(Xq);__c.aub=Ep(Vq);__c.bub=Ep(Wq);__c.cub=Ep(Yq);var dub,Rqb,eub,Sqb,fub;dub=class extends Rq{zZ(a){if(a!=null)switch(a.type){case 1:ka(this.NFd.Jv(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:ka(a.delta==null);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){zqb(this.NFd,a);const b=this._value.get();this.jq(this.domain.replace(b,a))}iT(){return this.value}constructor(a,b,c){super();this.NFd=a;this.domain=b;this._value=new Sq(c)}};
Rqb=class extends Qq{By(a){a=zqb(this.type,a);return new dub(this.type,this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.Xb()}destroy(a,b){Aqb(this.type,a.value,b)}pi(a,b){this.type.Jv(a.value,b)||(a.value=b);return!0}constructor(a,b){super(Pq,b);this.type=a;this.domain=new ytb(new wtb((c,d)=>this.type.Jv(c,d)))}};
eub=class extends Rq{instantiate(a){const b=tp(this,Qqb),{mutable:c,bw:d}=up(this.type,a,b);this.tvb.set(c);this.WPa=d;this.Zdb=b}destroy(a){vp(this.type,a,this.WPa,this.tvb.get())}zZ(a){if(a!=null)switch(a.type){case 0:this.WPa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}iT(){return this.type.Xb(this.ref)}get ref(){return this.tvb.get()}set(a){this.jq(new xtb(this.type.Xb(this.tvb.get()),a))}constructor(a,b,c){super();this.type=a;
this.domain=b;a=tp(this,Qqb);const {mutable:d,bw:e}=up(this.type,c,a);this.tvb=new Sq(d);this.WPa=e;this.Zdb=a}};Sqb=class extends Qq{By(a){return new eub(this.type,this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.Xb()}destroy(a,b){this.type.destroy(a.ref,b)}pi(a,b){this.type.pi(a.ref,b)||a.set(b);return!0}constructor(a,b){super(Pq,b);this.type=a;this.domain=new ytb(this.type.domain)}};__c.ar=Fp(Uq);br=__c.br=Fp(Tq);__c.cr=Fp(Xq);__c.dr=Fp(Vq);__c.er=Fp(Yq);fub=Fp(Wtb);__c.gub=Fp(Xtb);
__c.fr=Fp(Ytb);__c.gr=Hp(Uq);__c.hub=Hp(Tq);__c.hr=Hp(Xq);__c.iub=Hp(Vq);__c.ir=Hp(Yq);var Tqb=new Map,jub=class extends Oq{create(a,b){return Uqb(this,a,this.component.replace(void 0,b))}update(a,b){return Uqb(this,a,this.component.update(b))}replace(a,b,c){return Uqb(this,a,this.component.replace(b,c))}delete(a,b){return Uqb(this,a,this.component.replace(b,void 0))}identity(){return Tqb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}Lk(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.Lk(d),a!=null&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of Vqb(a,b)){const e=this.component.compose(a.get(d),b.get(d));e!=null&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return fp(b,a);const c=new Map,d=new Map,e=ep.Rq();for(const f of Vqb(a,b)){const g=hp(e,this.component.transform(a.get(f),b.get(f)));g.Ft!=null&&c.set(f,g.Ft);g.bt!=null&&d.set(f,g.bt)}return e.build(d,c)}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),
d);d!=null?c.set(e,d):c.delete(e)});return c}Yk(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Yk(a.get(e),d);d!=null?c.set(e,d):c.delete(e)});return c}Hh(a,b){return a===b||a.size===b.size&&Array.from(Vqb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.Hh(d,c)})}Dj(a,b){return a===b||a.size===b.size&&Array.from(Vqb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return d!=null&&c!=null&&this.component.Dj(d,c)})}equals(a){return this===
a||a instanceof jub&&this.component.equals(a)}constructor(a){super();this.component=new ytb(new ztb(a))}};var kub;kub=Symbol.iterator;
__c.lub=class extends Rq{static F(a){gb(a,{refs:Nq.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=c!=null?this.domain.replace(a,this.type.Xb(c),b):this.domain.create(a,b);this.jq(c);c=this.get(a);if(c==null)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);b!=null&&(a=this.domain.delete(a,this.type.Xb(b)),this.jq(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,c])=>
a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[kub](){return this.refs[Symbol.iterator]()}iT(){return $g(this.refs,a=>this.type.Xb(a))}destroy(a){ka(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.RFa.get(c));vp(this.type,d,c.to,b)})}pi(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.pi(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}zZ(a){a.forEach((b,c)=>{if(b!=null)switch(b.type){case 0:b.delta!=null&&m(this.RFa.get(c)).to.next(b.delta);break;case 1:b.oldState!=null?(this.k9b(c,b.oldState),this.refs.delete(c),this.RFa.delete(c)):(ka(!this.refs.has(c)),ka(!this.RFa.has(c)));if(b.newState!=null){const {eYc:d,value:e}=Wqb(this,c,b.newState);this.refs.set(c,e);this.RFa.set(c,d)}break;default:throw new r(b);}})}k9b(a,b){const c=m(this.refs.get(a));a=m(this.RFa.get(a));
vp(this.type,b,a.to,c)}constructor(a,b,c){super();this.type=a;this.domain=b;this.refs=(__c.lub.F(this),new Map);this.RFa=new Map;c.forEach((d,e)=>{const {eYc:f,value:g}=Wqb(this,e,d);this.refs.set(e,g);this.RFa.set(e,f)})}};__c.lub.prototype.iE=ea(125);
var Xqb=class extends Qq{By(a){return new __c.lub(this.type,this.domain,a)}Cm(a){return a}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){return this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(a,b){super(Pq,b);this.type=a;this.domain=new jub(this.type.domain)}};var mub={next:()=>{},complete:()=>{}},Yqb=class extends Qq{By(a){return zqb(this.type,a)}connect(){return mub}Xb(a){return a}destroy(a,b){Aqb(this.type,a,b)}pi(a,b){return this.type.Jv(a,b)}constructor(a,b){super(qp,b);this.type=a;this.domain=new wtb((c,d)=>this.type.Jv(c,d))}};var $qb=class extends Oq{static of(a){return new $qb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>c==null||this.components[b].isIdentity(c))}Lk(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];d!=null&&(c=this.components[e],d=c.Lk(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];e!=null&&g!=null?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):e!=null?c[f]=e:g!=null&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return fp(b,a);const g=ep.Rq();for(const h of new Set([...e,...f])){f=a[h];const k=b[h];f!=null&&k!=null?(e=this.components[h],f=hp(g,e.transform(f,k)),e.isIdentity(f.Ft)||(c[h]=f.Ft),e.isIdentity(f.bt)||
(d[h]=f.bt)):f!=null?c[h]=f:k!=null&&(d[h]=k)}return g.build(d,c)}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].apply(a[e],c));return d}Yk(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],c!=null&&(d[e]=this.components[e].Yk(a[e],c));return d}Hh(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].Hh(a[c],b[c]))}Dj(a,b){if(a===b)return!0;
const c=Object.keys(a),d=Object.keys(b);return!c.length&&!d.length||__c.bp([...c,...d]).every(e=>{const f=a[e],g=b[e];return f!=null&&g!=null&&this.components[e].Dj(f,g)})}equals(a){return this===a?!0:a instanceof $qb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var Zqb,oub;Zqb=class{get value(){return this.computed.get()}set value(a){this.computed.set(a)}constructor(a){this.computed=a}};
__c.nub=class extends Rq{iT(){const a=this.s8,b=this.$mb,c=this.FSa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].Xb(this.Gb[e]);for(const e in c)d[e]=c[e].Xb(this.attributes[e]);return d}destroy(a){const b=this.s8,c=this.$mb,d=this.FSa,e=this.m0c;for(const f in b)Aqb(b[f],this.values[f],a[f]);for(const f in c)vp(c[f],a[f],this.Urd[f],this.Gb[f]);for(const f in d)vp(d[f],a[f],this.jSc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}pi(a){const b=this.s8,c=this.$mb,
d=this.FSa;for(const e in b)if(!b[e].Jv(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].pi(this.Gb[e],a[e]))return!1;for(const e in d)if(!d[e].pi(this.attributes[e],a[e]))return!1;return!0}zZ(a){for(const b in a)a[b]!=null&&(b in this.$mb?this.Urd[b].next(a[b]):b in this.FSa&&this.jSc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.s8=b;this.$mb=c;this.FSa=d;this.m0c=void 0;this.values=
pp(b,(g,h)=>zqb(g,f[h]));a=pp(c,(g,h)=>{const k=crb(this,h),{bw:l,mutable:n}=up(g,f[h],k);return{ref:n,WPa:l,Zdb:k}});this.Gb=pp(a,g=>g.ref);this.Urd=pp(a,g=>g.WPa);pp(a,g=>g.Zdb);d=pp(d,(g,h)=>{const k=drb(this,h),{bw:l,mutable:n}=up(g,f[h],k);return{ref:n,WPa:l,Zdb:k}});this.attributes=pp(d,g=>g.ref);this.jSc=pp(d,g=>g.WPa);pp(d,g=>g.Zdb);if(e){const {Gb:g,attributes:h,iba:k}=e.create({...this.values,...this.Gb,...this.attributes});this.mXc=pp(e.Gb,(l,n)=>g[n]);this.G6b=pp(e.attributes,(l,n)=>h[n]);
this.m0c=k}else this.mXc={},this.G6b={}}};__c.nub.prototype.GO=ea(127);jr=__c.jr=Symbol("$impl");oub=class extends Qq{};
__c.pub=class extends oub{By(a){a=new __c.nub(this.domain,this.values,this.Gb,this.attributes,this.computed,a);const b={...a.values,...a.Gb,...a.mXc};Object.defineProperties(b,this.gWe);Object.defineProperty(b,jr,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[jr].connect(b)}Xb(a){return a[jr].Xb()}destroy(a,b){a[jr].destroy(b)}pi(a,b){return a[jr].pi(b)}Nh({values:a={},Gb:b={},attributes:c={},computed:d}){return new __c.pub({...this.values,...a},{...this.Gb,...b},{...this.attributes,
...c},erb(this.computed,d))}constructor(a,b,c,d){super(Pq,Pq);this.values=a;this.Gb=b;this.attributes=c;this.computed=d;this.domain=arb(pp(this.values,e=>new wtb((f,g)=>e.Jv(f,g))),pp(this.Gb,e=>e.domain),pp(this.attributes,e=>e.domain));brb(a,{...b,...(d===null||d===void 0?void 0:d.Gb)},{...c,...(d===null||d===void 0?void 0:d.attributes)});a=pp(c,(e,f)=>({enumerable:!0,get(){return this[jr].getAttribute(f)},set(g){this[jr].setAttribute(f,g)}}));d=pp((d===null||d===void 0?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[jr].G6b[f].value},set(g){this[jr].G6b[f].value=g}}));this.gWe={...a,...d}}};__c.pub.prototype.GO=ea(126);var frb=new __c.pub({},{},{});var qub=class extends Oq{KJ(a){return a}isIdentity(a){return a===0}compose(a,b){return a+b}transform(a,b){return fp(b,a)}Dj(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Yk(a,b){return a-b}Hh(a,b){return a===b}},rub=class extends qub{Lk(a){return 0-a}equals(a){return this===a||a instanceof rub}},sub=class extends qub{KJ(a){ka(a>=0);return super.KJ(a)}compose(a,b){ka(a>=0);ka(b>=0);return super.compose(a,b)}transform(a,b){ka(a>=0);ka(b>=0);return super.transform(a,b)}Lk(a){ka(a>=0);return 0}apply(a,
b){ka(b>=0);return super.apply(a,b)}Yk(a,b){ka(b>=0);return super.Yk(a,b)}equals(a){return this===a||a instanceof sub}},tub=new rub,uub=new sub;var vub=class extends Rq{zZ(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}KJ(a){this.jq(this.domain.KJ(a))}iT(){return this.value}constructor(a,b){super();this.domain=a;this._value=new Sq(b)}},wub=class extends Qq{By(a){return new vub(this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.Xb()}destroy(a,b){dp(this.domain,a.value,b)}pi(a,b){a.KJ(b-a.value);return!0}},xub=class extends wub{constructor(){super(qp,qp);this.domain=tub}},yub=class extends wub{pi(a,
b){return b<a.value?!1:super.pi(a,b)}constructor(){super(qp,qp);this.domain=uub}};new xub;new yub;__c.zub=Symbol.iterator;__c.Aub=Symbol.iterator;var Bub;Bub=Symbol.iterator;
__c.kr=class extends Rq{static F(a){gb(a,{baa:Kp,Np:Kp,empty:Kp,aDb:Kp,rIb:Kp})}ALa(a){const b=tp(this,e=>Np(this).retain(this.bM(c)).update(e).build()),{mutable:c,bw:d}=up(this.type,a,b);return{id:String(this.RKb++),value:c,to:d,from:b}}j9b(a,b){vp(this.type,a,b.to,b.value)}get baa(){const a=new Map;this.rJ.forEach((b,c)=>b&&a.set(b.value,c));return a}get Np(){return this.rJ.filter(__c.Ra)}get(a){return(a=this.rJ[a])&&a.value}Vec(a){return(a=this.Np[a])&&a.value}bM(a){return m(this.baa.get(a),"ref not found")}zZ(a){const b=
this.rJ,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,g!=null?this.ALa(g):void 0);h&&(d.set(h.Ah,b[e]),c.set(h.El,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;h!=null&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;h==null?la(b[e]==null):this.j9b(h,m(b[e]));b[e]=k!=
null?this.ALa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.Ah,b[e]),c.set(g.El,e));e++;break;default:throw new r(f);}la(d.size===a.ENa);la(c.size===a.ENa);for(e=0;e<a.ENa;e++)la(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&b[b.length-1]==null;)b.length--}iT(){const a=[];this.rJ.forEach((b,c)=>{b!=null&&(a[c]=this.type.Xb(b.value))});return a}destroy(a){let b=0;this.rJ.forEach((d,e)=>{d!=null&&(ka(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);ka(b===c)}pi(a){const b=
this.rJ,c=Np(this);for(let e=0;e<b.length;e++){const f=b[e];f!=null&&a[e]!=null&&this.type.pi(f.value,a[e])||f==null&&a[e]==null?c.retain():c.change(f&&this.type.Xb(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.jq(c.build());return!0}get empty(){return!this.Np.length}count(){return this.Np.length}toArray(){return this.Np.map(a=>a.value)}[Bub](){return this.toArray()[Symbol.iterator]()}get aDb(){const a=
this.Np[0];return a&&a.value}get rIb(){const a=this.Np[this.Np.length-1];return a&&a.value}first(a){if(!a)return this.aDb;const b=this.Np.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.rIb;const b=this.Np;for(let c=b.length-1;c>=0;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.rJ;for(a=this.bM(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}zj(a,b){const c=this.rJ;for(a=this.bM(a)-1;a>=0;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}oq(a,
b){a=this.baa.get(a);b=this.baa.get(b);ka(a!=null);ka(b!=null);return a<b?-1:a>b?1:0}has(a){return this.baa.has(a)}insertAt(a,b){this.jq(Np(this).retain(a).insert(b).build());return this.rJ[a].value}set(a,b){var c;ka(a>=0);a>=this.rJ.length&&(this.rJ.length=a+1);const d=(c=this.rJ[a])===null||c===void 0?void 0:c.value;c=d!=null?this.type.Xb(d):void 0;this.jq(Np(this).retain(a).change(c,b).build());return this.rJ[a].value}replace(a,b){a=this.bM(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,
a)}prepend(a){return this.EJa(void 0,a)}EJa(a,b){return this.insertAt(a?this.bM(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?this.bM(a):this.rJ.length,b)}delete(a){a=Np(this).retain(this.bM(a)).gX(this.type.Xb(a)).build();this.jq(a)}moveTo(a,b){const c=this.bM(b);if(c===a)return b;this.jq(c<a?Np(this).retain(c).retain({Ah:0,El:1}).retain(a-c-1).expand({Ah:1,El:0}).build():Np(this).retain(a).expand({Ah:0,El:1}).retain(c-a).retain({Ah:1,El:0}).build());return b}map(a){return this.Np.map(({value:b,
id:c})=>a(b,c))}flatMap(a){return this.Np.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.Np.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.Np.forEach(b=>b!=null&&a(b.value,b.id))}reduce(a,b){return this.Np.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.Np.some(b=>a(b.value,b.id))}every(a){return this.Np.every(b=>a(b.value,b.id))}constructor(a,b,c){super();this.type=a;this.domain=b;this.rJ=(__c.kr.F(this),void 0);this.RKb=0;ka(!c.length||c[c.length-1]!=null);this.rJ=Nq.array([...c.map(d=>
this.ALa(d))],{deep:!1})}};__c.aa=__c.kr.prototype;__c.aa.GG=ea(144);__c.aa.H4=ea(139);__c.aa.p5=ea(134);__c.aa.FX=ea(130);__c.aa.iE=ea(123);__c.grb=class extends Qq{hg(){return this.domain.hg()}Cm(a){return a}By(a){return new __c.kr(this.type,this.domain,a)}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(a,b){super(Pq,b);this.type=a;this.domain=new Itb(this.type.domain)}};__c.grb.prototype.Dz=ea(146);__c.Cub=Symbol.iterator;var Dub;Dub=class extends Oq{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}Lk(a){throw new r(a);}Dj(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Yk(a){throw new r(a);}Hh(a){throw new r(a);}equals(a){return this===a||a instanceof Dub}};__c.Eub=new Dub;var Fub,Gub,Lub,Mub,Nub,Oub,pr,Qub,Rub,Pub;Fub=class{};lr=__c.lr=class extends Fub{get length(){return this.state.length}RVb(a){hrb(this,a);return this.state.charAt(a)}hS(a){irb(this,a);return[new lr(this.state.substring(0,a)),new lr(this.state.substring(a))]}gI(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;ka(!!a)}};
Sp=__c.Sp=class extends Fub{get length(){return 1}RVb(a){hrb(this,a);return this.state}hS(a){irb(this,a);throw Error();}gI(a){return new Sp(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
mr=__c.mr=class extends Fub{get length(){return this.state}RVb(a){hrb(this,a)}hS(a){irb(this,a);return[new mr(a),new mr(this.state-a)]}gI(){return this}toString(){return this.state<=7?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;ka(!!a)}};
__c.or=class{get length(){return this.Wla+this.vq+this.LEc}ld(a){return new Gub(this,a)}cursor(a,b){return new __c.Iub(this,a,b)}gI(a){const b=this.kv.map(c=>c.gI(a));return new __c.or(b,this.Wla,this.vq,this.LEc)}Za(){return this.kv.map(a=>a.type===0?a.state:"").join("")}forEach(a,b){for(const c of this.kv)switch(c.type){case 0:b.Za&&b.Za(c.state);break;case 1:b.item(c.state);break;case 2:b.tj&&b.tj(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.tj&&b.tj(a)}map(a,b){const c=
this.kv.map(d=>{switch(d.type){case 0:return b.Za(d.state);case 1:return b.item(d.state);case 2:return b.tj(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.tj(a));return c}reduce(a,b){return this.kv.reduce((c,d)=>{switch(d.type){case 0:return a.Za(c,d.state);case 1:return a.item(c,d.state);case 2:return a.tj?a.tj(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){ka(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Jub;
const d=new __c.Kub;c=this.cursor(b);c.fR(a);c.fR(b-a,{item:e=>d.item(e),Za:e=>d.Ee(e),tj:e=>d.c3(e)});return d.build()}toString(){return this.kv.join("")}constructor(a,b,c,d){this.kv=a;this.Wla=b;this.vq=c;this.LEc=d;a=a.length?a[a.length-1]:void 0;ka(!a||a.type!==2)}};__c.or.prototype.Lhb=ea(148);__c.Jub=new __c.or([],0,0,0);
__c.Kub=class{rja(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(this.mode!=null){switch(this.mode){case 0:this.kv.push(new lr(this.enb));this.Rxb+=this.enb.length;this.enb="";break;case 2:this.kv.push(new mr(this.fnb));this.tUb+=this.fnb;this.fnb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.Ee(a.state);case 1:return this.item(a.state);case 2:return this.c3(a.state);default:throw new r(a);}}Ee(a){a&&(this.rja(0),this.enb+=a);return this}item(a){this.flush();
this.kv.push(new Sp(a));this.Ykc++;return this}c3(a){a>0&&(this.rja(2),this.fnb+=a);return this}append(a,b=0){a.forEach(b,{Za:c=>this.Ee(c),item:c=>this.item(c),tj:c=>this.c3(c)});return this}get length(){return this.Rxb+this.Ykc+this.tUb}build(){this.mode!==2&&this.flush();return this.length?new __c.or(this.kv,this.Rxb,this.Ykc,this.tUb):__c.Jub}constructor(){this.kv=[];this.mode=void 0;this.enb="";this.tUb=this.Ykc=this.Rxb=this.fnb=0}};
Gub=class{get head(){return this.Gl}get prevValue(){return this.hmb&&this.hmb.RVb(this.hmb.length-1)}sn(a){const b=m(this.Gl),c=b.length;ka(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.hS(a),this.Gl=a[1],this.hmb=a[0];this.Gl=this.kv[this.i++];return this.hmb=b}finish(){la(this.Gl==null,"unconsumed reader head: {}",this.Gl)}constructor(a,b=0){this.i=0;this.hmb=void 0;this.kv=(b=Math.max(0,b-a.length))?[...a.kv,new mr(b)]:a.kv;this.Gl=this.kv.length?this.kv[this.i++]:void 0}};
__c.Iub=class{get prevValue(){return this.ld.prevValue}move(a,b,c){for(c=__c.jrb(this.Cib,c);a;){var d=this.ld.head;if(d)switch(d=this.ld.sn(b||d.type!==2?Math.min(d.length,a):d.length),d.type){case 0:c&&c.Za&&c.Za(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.tj&&c.tj(d.state);b&&(a-=d.length);break;default:throw new r(d);}else ka(b,"not enough characters or items: {}",a),c&&c.tj&&c.tj(a),a-=a}}fR(a,b){this.move(a,!0,b)}Xm(a,b){this.move(a,!1,b)}finish(){this.ld.finish()}constructor(a,
b,c){this.Cib=c;this.ld=a.ld(b)}};__c.Iub.prototype.pLa=ea(149);__c.Iub.prototype.GG=ea(143);Lub=class{};Mub=class extends Lub{get fba(){return this.length}get w1(){return this.length}zSb(a){krb(this,a);return this.hS(a)}ySb(a){lrb(this,a);return this.hS(a)}hS(a){return[new Mub(a),new Mub(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
Nub=class extends Lub{get fba(){return 1}get w1(){return 1}zSb(a){krb(this,a);throw Error();}ySb(a){lrb(this,a);throw Error();}map(a){return new Nub(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
Oub=class extends Lub{get fba(){return 0}get w1(){return this.state.length}zSb(a){krb(this,a);throw Error();}ySb(a){lrb(this,a);const [b,c]=this.state.hS(a);return[new Oub(b),new Oub(c)]}map(a,b){return new Oub(this.state.gI(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
pr=class extends Lub{get fba(){return this.oldState.length}get w1(){return this.newState.length}zSb(a){krb(this,a);return this.hS(a)}ySb(a){lrb(this,a);return this.hS(a)}hS(a){const [b,c]=this.oldState.hS(a),[d,e]=this.newState.hS(a);return[new pr(b,d),new pr(c,e)]}map(a,b){return new pr(this.oldState.gI(b),this.newState.gI(b))}toString(){return this.oldState.type===2?this.newState.type===2?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:this.newState.type===2?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;cp(a.length,b.length)}};
Qub=class{ld(a,b){return new Pub(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}gI(a,b){const c=this.ops.map(d=>d.map(a,b));return new Qub(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};Rub=new Qub([],0,0);
__c.Sub=class{rja(a,b,c){if(this.K1!==a||this.Fpc!==b||this.apc!==c)switch(this.flush(),this.K1=a,this.Fpc=b,this.apc=c,a){case 0:break;case 2:c===0&&(this.fY="");break;case 3:b===0&&(this.hza="");c===0&&(this.fY="");break;default:throw new r(a);}}flush(){if(this.K1!=null){switch(this.K1){case 0:this.push(new Mub(this.acc));this.acc=0;break;case 2:var a=this.fY!=null?new lr(this.fY):new mr(this.acc);this.push(new Oub(a));this.fY=void 0;this.acc=0;break;case 3:a=this.hza!=null?new lr(this.hza):new mr(this.acc);
const b=this.fY!=null?new lr(this.fY):new mr(this.acc);this.push(new pr(a,b));this.fY=this.hza=void 0;this.acc=0;break;default:throw new r(this.K1);}this.apc=this.Fpc=this.K1=void 0}}push(a){this.ops.push(a);this.pre+=a.fba;this.post+=a.w1}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.vxa(a.state);case 3:return Qp(this,a.oldState,a.newState);default:throw new r(a);}}vxa(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){ka(a>=0);a&&(this.rja(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new Nub(a));this.pre++;this.post++;return this}expand(a){ka(a>=0);a&&(this.rja(2,void 0,2),this.acc+=a);return this}insert(a){typeof a==="string"?a&&(this.rja(2,void 0,0),this.fY+=a):(this.flush(),this.push(new Oub(new Sp(a))));return this}pra(a){ka(a>=0);a&&(this.rja(3,2,2),this.acc+=a);return this}f5a(a){typeof a===
"string"?a&&(this.rja(3,2,0),this.acc+=a.length,this.fY+=a):(this.flush(),this.push(new pr(new mr(1),new Sp(a))));return this}gX(a){typeof a==="string"?a&&(this.rja(3,0,2),this.acc+=a.length,this.hza+=a):(this.flush(),this.push(new pr(new Sp(a),new mr(1))));return this}change(a,b){typeof a==="string"?typeof b==="string"?(cp(a.length,b.length),a&&(this.rja(3,0,0),this.hza+=a,this.fY+=b)):(cp(a.length,1),this.flush(),this.push(new pr(new lr(a),new Sp(b)))):typeof b==="string"?(cp(1,b.length),this.flush(),
this.push(new pr(new Sp(a),new lr(b)))):(this.flush(),this.push(new pr(new Sp(a),new Sp(b))));return this}build(){this.K1!==0&&this.flush();return new Qub(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.apc=this.Fpc=this.K1=void 0;this.acc=0;this.fY=this.hza=void 0}};__c.Sub.prototype.wxa=ea(152);
Pub=class{get head(){return this.Gl}finish(){la(this.Gl==null)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new Mub(b)]:a.ops;this.i=0;this.Gl=this.ops[this.i++]}};
__c.Tub=class extends Oq{hg(){return new __c.Sub(a=>this.component.isIdentity(a))}$f(){return new __c.Kub}id(){return Rub}ON(){return __c.Jub}isIdentity(a){return!a.ops.length||a.ops.every(b=>b.type===0)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.ld(0,b.pre),d=b.ld(a.post,0),e=this.hg();for(;;){let g=c.head;var f=d.head;if(!f)break;f.type===2?(g=void 0,f=Rp(d)):g&&(f=Math.min(g.w1,f.fba),g=nrb(c,f),f=__c.mrb(d,f));if(f.type===2)e.vxa(f.state);else if(g)g.type===2?e.vxa(prb(this,
g.state,f)):f.type===0?e.op(g):g.type===0?e.op(f):g.type===1?f.type===1?e.update(this.component.compose(g.delta,f.delta)):Qp(e,qrb(this,f.oldState,g),f.newState):Qp(e,g.oldState,prb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return fp(b,a);const c=this.hg(),d=this.hg(),e=a.ld(b.pre,0),f=b.ld(a.pre,0),g=ep.Rq();for(;;){var h=e.head,k=f.head;if(!h&&!k)break;h&&h.type===2?(h=Rp(e),k=void 0):
k&&k.type===2?(h=void 0,k=Rp(f)):h&&k&&(k=Math.min(h.fba,k.fba),h=__c.mrb(e,k),k=__c.mrb(f,k));if(h&&h.type===2)d.retain(h.w1),c.op(h);else if(k&&k.type===2)d.op(k),c.retain(k.w1);else if(h&&k)h.type===0||k.type===0?(d.op(k),c.op(h)):h.type===3?(d.retain(h.w1),Qp(c,prb(this,h.oldState,k),h.newState),Mpb(g,k.type===3?!Tp(this,h.newState,k.newState):!this.component.isIdentity(k.delta))):k.type===3?(Qp(d,prb(this,k.oldState,h),k.newState),c.retain(k.w1),Npb(g,!this.component.isIdentity(h.delta))):(h=
hp(g,this.component.transform(h.delta,k.delta)),d.update(h.bt),c.update(h.Ft));else throw Error(`length mismatch (${a} x ${b})`);}e.finish();f.finish();return g.build(d.build(),c.build())}Lk(a){if(!a.ops.length)return a;const b=this.hg();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.Lk(c.delta));break;case 2:a=c.state;a.type===2?b.retain(a.length):b.gX(a.state);break;case 3:a=c.oldState;const d=c.newState;a.type===2&&d.type===2?b.retain(a.length):
Qp(b,d,a);break;default:throw new r(c);}return b.build()}Dj(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.Asc(a.ops[c],b.ops[c]))return!1;return!0}Asc(a,b){switch(a.type){case 0:return b.type===0&&a.length===b.length;case 1:return b.type===1&&this.component.Dj(a.delta,b.delta);case 2:return b.type===2&&Tp(this,a.state,b.state);case 3:return b.type===3&&Tp(this,a.oldState,b.oldState)&&Tp(this,a.newState,b.newState);default:throw new r(a);}}identity(){return Rub}apply(a,
b){const c=this.$f(),d=a.ld(b.pre);for(a=b.ld(a.length,0);;){b=d.head;var e=a.head;if(!e)break;e.type===2?(b=void 0,e=Rp(a)):b&&(e=Math.min(b.length,e.fba),b=d.sn(e),e=__c.mrb(a,e));if(e.type===2)c.region(e.state);else if(b)c.region(prb(this,b,e));else break}d.finish();a.finish();return c.build()}Yk(a,b){const c=this.$f(),d=a.ld(b.post);for(a=b.ld(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;e.type===2?(b=d.sn(e.w1),e=Rp(a)):(e=Math.min(b.length,e.w1),b=d.sn(e),e=nrb(a,e));if(e.type===2)__c.orb(this,
b,e.state);else if(b)c.region(qrb(this,b,e));else break}d.finish();a.finish();return c.build()}Hh(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.ld();b=b.ld();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!Tp(this,c,d))return!1;a.sn(c.length);b.sn(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.Tub&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.Tub.prototype.jD=ea(156);__c.Up=new __c.Tub(__c.Eub);
Vp=__c.Vp={item:a=>{throw new r(a);}};var Uub;Uub=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.Za);break;case 2:a.insert&&a.insert(d.Za);break;case 1:a.delete&&a.delete(d.Za);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static Rq(){return new Wp}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
Wp=__c.Wp=class{static insert(a,b){return(new Wp).retain(a).insert(b).build()}static delete(a,b){return(new Wp).retain(a).delete(b).build()}retain(a){ka(a>=0);a>0&&(this.c8(0),this.A2a+=a);return this}insert(a){a.length>0&&(this.c8(2),this.Kgb+=a);return this}delete(a){a>0&&(this.c8(1),this.JUa+=a);return this}c8(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.A2a;ka(d>0);c.call(b,{type:0,Za:d});this.pre+=this.A2a;this.post+=this.A2a;this.A2a=0;break;case 2:b=this.ops;
c=b.push;d=this.Kgb;ka(d.length>0);c.call(b,{type:2,Za:d});this.post+=this.Kgb.length;this.Kgb="";break;case 1:b=this.ops;c=b.push;d=this.JUa;ka(d>0);c.call(b,{type:1,Za:d});this.pre+=this.JUa;this.post+=this.JUa;this.JUa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){this.mode!==0&&this.c8();return new Uub(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.A2a=0;this.Kgb="";this.JUa=0}};__c.Vub=class extends Rq{static F(a){gb(a,{Za:Kp})}get Za(){return this.state.get().Za()}insert(a,b){this.jq(__c.rrb(this.state.get(),Wp.insert(a,b)))}delete(a,b){this.jq(__c.rrb(this.state.get(),Wp.delete(a,b)))}zZ(a){const b=srb(this.state.get(),a);this.state.set(__c.Up.apply(this.state.get(),a));this.subject.next(b)}iT(){return this.state.get()}destroy(a){ka(__c.Up.Hh(this.state.get(),a))}pi(a){return __c.Up.Hh(this.state.get(),a)}constructor(a,b){super();this.domain=a;this.state=(__c.Vub.F(this),
void 0);this.subject=new __c.htb;this.state=new Sq(b)}};__c.Vub.prototype.BN=ea(161);var Wub=class extends Ntb{Cm(a){return a}By(a){return new __c.Vub(this.domain,a)}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(){super();this.domain=__c.Up}};new Wub;__c.Xub=class extends Oq{get target(){return m(this.F0b)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}Lk(a){return this.target.Lk(a)}Dj(a,b){return this.target.Dj(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Yk(a,b){return this.target.Yk(a,b)}Hh(a,b){return this.target.Hh(a,b)}equals(a){return this===a||a instanceof __c.Xub&&this.target.equals(a.target)}constructor(){super();
this.F0b=void 0}};__c.Xub.prototype.eja=ea(163);__c.qr=class extends Qq{get type(){return m(this.H0b)}By(a){return this.type.By(a)}connect(a,b){return this.type.connect(a,b)}Xb(a){return this.type.Xb(a)}destroy(a,b){this.type.destroy(a,b)}pi(a,b){return this.type.pi(a,b)}constructor(){super(new Jtb(()=>this.type.a9b),new Jtb(()=>this.type.Yra));this.H0b=void 0;this.domain=new __c.Xub}};__c.qr.prototype.eja=ea(162);var Yub,dvb,Zub,$ub;Yub=urb({},{});
__c.cvb=class{ld(a){return new Zub(this,a)}cursor(a,b){return new $ub(this,a,b)}forEach(a,{grad:b,yc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.kD,d.DE);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,yc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.kD,e.DE);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,yc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.kD,e.DE):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){ka(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.avb;const d=new __c.bvb;c=this.cursor(b);c.move(a);d.attrs(c.MO,c.oia);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).yc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.DE))b.push(`${c}:${d!=
null?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;ka(!a||a.type!==1)}};__c.cvb.prototype.oJb=ea(164);__c.avb=new __c.cvb([],0);
__c.evb=class{ld(a,b){return new dvb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!yrb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.xrb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${e.gS!=null?`"${e.gS}"`:"null"}=>${e.bP!=null?`"${e.bP}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.fvb=new __c.evb([],0,0);
dvb=class{get yM(){return this.rvb}get next(){return this._next}Gr(a,b){const c=m(this._next);la(c.type===a,"{} != {}",c.type,a);ka(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.rvb[d]=f:delete this.rvb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.b4a&&(this._next=zrb(this.b4a,ap(this.rvb,()=>({r:void 0}))),this.b4a=0));return c.changes}zy(a){return this.Gr(0,
a)}Pea(a){return this.Gr(1,a)}finish(){la(!this._next)}constructor(a,b=0,c=0){this.i=0;this.rvb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.b4a=Math.max(0,b-a.pre,c-a.post);!this._next&&this.b4a&&(this._next=zrb(this.b4a),this.b4a=0)}};
Zub=class{get head(){return this.Gl}get MO(){return this.nH}get oia(){return this.E0b}sn(a){var b=this.Gl;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Gl=a<b?vrb(b-a):this.input[this.i++];return a}apply(a){__c.Yp(a.kD,a.DE,(b,c,d)=>{c!=null&&d!=null?(this.nH[b]=c,this.E0b[b]=d):(delete this.nH[b],delete this.E0b[b])})}Nu(){const a=this.Gl;if(!a||a.type===1)return Yub;this.Gl=this.input[this.i++];this.apply(a);return a}finish(){la(!this.Gl)}constructor(a,
b=0){this.i=0;this.nH={};this.E0b={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,vrb(b)]:a.items;this.Gl=this.input.length?this.input[this.i++]:void 0}};
$ub=class{get gA(){return this.ld.length-this.Zda}get MO(){return this.ld.MO}get oia(){return this.ld.oia}move(a,b){var c=this.Cib;b=c?b?{cells:__c.Pp(c.cells,b.cells)}:c:b;ka(a>=0,"{} < 0",a);a=this.Zda+a;for(ka(a<=this.ld.length,"{} > {}",a,this.ld.length);this.Zda<a;){c=this.ld.Nu();const d=this.ld.sn(a-this.Zda);this.Zda+=d;b&&b.cells&&b.cells(d,c.kD,this.MO,c.DE,this.oia)}}finish(){this.ld.Nu();this.ld.finish()}constructor(a,b,c){this.Cib=c;this.Zda=0;this.ld=new Zub(a,b)}};
__c.bvb=class{sl(a,b,c){this.qja[a]!==c?(this.kD[a]=b,this.DE[a]=c):(delete this.kD[a],delete this.DE[a]);return this}attrs(a,b){__c.Yp(a,b,(c,d,e)=>this.sl(c,d,e));return this}yc(a){a>0&&(Object.keys(this.kD).length&&(this.length&&(this.items.push(vrb(this.length)),this.length=0),this.items.push(urb(this.kD,this.DE)),__c.Yp(this.kD,this.DE,(b,c,d)=>{if(c!=null){this.as[b]=c;this.qja[b]=d;var e;((e=this.attributes[b])!==null&&e!==void 0?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],
delete this.qja[b]}),this.kD={},this.DE={}),this.length+=a,this.f3+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),yc:c=>this.yc(c)});return this}build(){for(const a of __c.Xp(this.as))this.sl(a);for(const a of __c.Xp(this.kD))this.sl(a);Object.keys(this.kD).length?(la(!!this.length,"attributes still open: {}",this.kD),this.items.push(vrb(this.length)),this.items.push(urb(this.kD,this.DE)),this.length=0,this.kD={},this.DE={}):this.f3-=this.length;return new __c.cvb(this.items,
this.f3,this.attributes)}constructor(){this.items=[];this.attributes={};this.as={};this.qja={};this.length=this.f3=0;this.kD={};this.DE={}}};var $p,gvb,hvb,ivb,Drb,kvb,jvb,mvb,nvb,ovb,lvb;$p=class{static from(a){if(a instanceof $p)return a;if(Array.isArray(a)){const [b,c]=a;return new $p(b,c)}return new $p(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
gvb=class{get isEmpty(){return!this.Ae.size}slice(a,b){ka(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Ae){var d=b<f.from||f.to<a?void 0:new $p(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new gvb(c)}toString(){return[...this.Ae].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Ae=a}};hvb=new gvb;
ivb=class{range(a,b){b?this.T8.set(a,$p.from(b)):this.T8.delete(a);return this}Ae(a){a.forEach((b,c)=>this.T8.set(c,$p.from(b)));return this}build(){return this.T8.size?new gvb(this.T8):hvb}constructor(){this.T8=new Map}};Drb=class{toString(){return`${this.gba||"_"}->${this.aba||"_"}`}constructor(a,b){this.gba=a;this.aba=b}};kvb=class{toString(){return`${jvb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};jvb={[0]:"R",[1]:"I"};
mvb=class{ld(a,b){return new lvb(this,a,b)}toString(){const a=this.Eea.join(""),b=[...this.Ae].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.Eea=a;this.Ae=b;this.pre=c;this.post=d}};nvb=new mvb([],new Map,0,0);
ovb=class{append(a,b){ka(b>=0,"{} < 0",b);if(!b)return this;this.K1===a?this.length+=b:(this.K1!=null&&this.ops.push(new kvb(this.K1,this.length)),this.K1=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.n2a(a,void 0,b)}n2a(a,b,c){b=new Drb(b&&$p.from(b),c&&$p.from(c));this.Ae.set(a,b);return this}JNa(a){a.forEach((b,c)=>this.Ae.set(c,
b));return this}build(){const a=this.K1,b=this.length;a===0?(this.pre-=b,this.post-=b):a!=null&&this.ops.push(new kvb(a,b));return this.ops.length||this.Ae.size?new mvb(this.ops,this.Ae,this.pre,this.post):nvb}constructor(){this.ops=[];this.K1=void 0;this.post=this.pre=this.length=0;this.Ae=new Map}};
lvb=class{get next(){return this._next}get Duc(){return this.qvb}get RNb(){return this.VRa}get FJa(){return this.VRa-this.qvb}Gr(a,b){const c=m(this._next);la(c.type===a,"{} != {}",c.type,a);ka(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new kvb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}zy(a){this.Gr(0,a);this.qvb+=a;this.VRa+=a}Pea(a){this.Gr(1,a);this.VRa+=a}finish(){la(!this._next)}constructor(a,b=0,c=0){this.VRa=this.qvb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.Eea,new kvb(0,b)]:a.Eea;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.pvb=class extends Oq{$f(){return new ivb}hg(){return new ovb}isIdentity(a){return!a.Eea.length&&!a.Ae.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of Erb(a.Ae,b.Ae)){var g=a.Ae.get(f),h=b.Ae.get(f);g&&h?(ka(Zp(g.aba,h.gba)),e.set(f,new Drb(g.gba,h.aba))):g?c.set(f,g):h&&d.set(f,h)}f=this.hg();g=a.ld(0,b.pre);a=b.ld(a.post,0);b=g.next;for(h=a.next;h;){if(h.type===1)b=h.length,aq(c,void 0,g.RNb+a.FJa,b),a.Pea(b),f.insert(b);
else if(b)b.type===1?(b=Math.min(b.length,h.length),aq(d,a.Duc-g.FJa,void 0,-b),g.Pea(b),a.zy(b),f.insert(b)):(b=Math.min(b.length,h.length),g.zy(b),a.zy(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.JNa(e);f.JNa(c);f.JNa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return fp(b,a);var c=new Map,d=new Map;const e=new Map,f=ep.Rq();for(var g of Erb(a.Ae,b.Ae)){var h=a.Ae.get(g),k=b.Ae.get(g);h&&k?(ka(Zp(h.gba,k.gba)),e.set(g,
new Drb(k.aba,h.aba)),Mpb(f)):h?c.set(g,h):k&&d.set(g,k)}h=a.ld(b.pre,0);k=b.ld(a.pre,0);g=this.hg();const l=this.hg();var n=h.next;let p=k.next;for(;n||p;){if(n&&n.type===1)n=n.length,aq(d,k.Duc+h.FJa,k.RNb+h.FJa,n),h.Pea(n),l.retain(n),g.insert(n);else if(p&&p.type===1)n=p.length,aq(c,h.Duc+k.FJa,h.RNb+k.FJa,n),aq(e,void 0,h.RNb+k.FJa,n),k.Pea(n),l.insert(n),g.retain(n);else if(n&&p)n=Math.min(n.length,p.length),h.zy(n),k.zy(n),l.retain(n),g.retain(n);else throw Error(`unreachable case: ${n} x ${p}`);
n=h.next;p=k.next}h.finish();k.finish();d=l.JNa(d).build();c=g.JNa(c).JNa(e).build();cp(d.post-d.pre,b.post-b.pre);cp(c.post-c.pre,a.post-a.pre);return f.build(d,c)}Lk(a){if(!a.Ae.size)return nvb;const b=new Map(a.Ae);Arb(a,{insert:(c,d,e)=>aq(b,e,void 0,c)});a=$g(b,c=>new Drb(c.aba,c.gba));return new mvb([],a,0,0)}Dj(a,b){if(a===b)return!0;if(a.Eea.length!==b.Eea.length||a.Ae.size!==b.Ae.size)return!1;for(let e=0;e<a.Eea.length;e++){var c=a.Eea[e],d=b.Eea[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Ae.keys())if(c=
a.Ae.get(e),d=b.Ae.get(e),c?!(d&&Zp(c.gba,d.gba)&&Zp(c.aba,d.aba)):d)return!1;return!0}id(){return nvb}identity(){return nvb}apply(a,b){if(this.isIdentity(b)||!a.Ae.size&&!b.Ae.size)return a;const c=this.$f(),d=new Map(a.Ae);for(const [e,f]of b.Ae)ka(Zp(a.Ae.get(e),f.gba)),d.delete(e),c.range(e,f.aba);Arb(b,{insert:(e,f,g)=>Crb(d,g,e)});return c.Ae(d).build()}Yk(a,b){if(this.isIdentity(b)||!a.Ae.size&&!b.Ae.size)return a;const c=this.$f(),d=new Map(a.Ae);for(const [e,f]of b.Ae)ka(Zp(a.Ae.get(e),f.aba)),
d.delete(e),c.range(e,f.gba);Arb(b,{insert:(e,f)=>Crb(d,f,-e)});return c.Ae(d).build()}Hh(a,b){const c=a.Ae,d=b.Ae;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>Zp(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.pvb}constructor(){super();this.ON=hvb}};__c.pvb.prototype.jD=ea(155);__c.qvb=new __c.pvb;var rvb=class extends Oq{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=Frb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=Frb(a.key,b.key);a=this.components[c].transform(a.value,b.value);return Lpb(a,d=>({key:c,value:d}))}Lk(a){return{key:a.key,value:this.components[a.key].Lk(a.value)}}Dj(a,b){return a.key===b.key&&this.components[a.key].Dj(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=Frb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Yk(a,b){const c=Frb(a.key,b.key);return{key:c,value:this.components[c].Yk(a.value,b.value)}}Hh(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].Hh(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var svb=class extends Oq{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}Lk(a){return this.sum.Lk(a)}Dj(a,b){return this.sum.Dj(a,b)}identity(a){return this.sum.identity(Grb(this,a))}apply(a,b){return this.sum.apply(Grb(this,a),b).value}Yk(a,b){return this.sum.Yk(Grb(this,a),b).value}Hh(a,b){return a===b||this.sum.Hh(Grb(this,a),Grb(this,b))}equals(a){return this===a||a instanceof svb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.bVa=b;this.sum=new rvb(this.components)}};var Hrb=class extends Qq{create(a,b,c){return super.create(a,b,c)}By(a){const b=this.bVa(a);return this.hL[b].By(a)}connect(a,b){const c=this.sAb(a),d=this.hL[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{ka(e.key===c);d.next(e.value)},complete:()=>d.complete()}}Xb(a){const b=this.sAb(a);return this.hL[b].Xb(a)}destroy(a,b){const c=this.sAb(a),d=this.bVa(b);ka(c===d);this.hL[c].destroy(a,b)}pi(a,b){const c=this.sAb(a),d=this.bVa(b);return c===d&&this.hL[c].pi(a,
b)}constructor(a,b,c){super(Pq,Pq);this.hL=a;this.bVa=b;this.sAb=c;this.domain=new svb(ap(this.hL,d=>d.domain),this.bVa)}};var tvb=class extends Oq{isIdentity(){return!0}compose(){return 1}transform(){return fp(1,1)}Lk(){return 1}Dj(){return!0}identity(){return 1}apply(){return 1}Yk(){return 1}Hh(){return!0}equals(a){return this===a||a instanceof tvb}constructor(){super();this.unit=1}},uvb=new tvb;var vvb;vvb=class extends Qq{By(a){return a}connect(){return{next:()=>{},complete:()=>{}}}Xb(a){return a}destroy(){}pi(){return!0}constructor(){super(qp,qp);this.domain=uvb}};__c.wvb=new vvb;var xvb=new Map,yvb=class extends Oq{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>b===0)}compose(a,b){return Jrb(a,b)}transform(a,b){return fp(b,a)}Lk(a){return a.size?$g(a,b=>-b):a}Dj(a,b){return Irb(a,b)}identity(){return xvb}apply(a,b){return Jrb(a,b)}Yk(a,b){return Jrb(a,this.Lk(b))}Hh(a,b){return Irb(a,b)}equals(a){return this===a||a instanceof yvb}};var zvb,Avb,Bvb;zvb=Symbol.iterator;
Avb=class extends Rq{static F(a){gb(a,{values:Kp.struct})}zZ(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}iT(){return new Map(this.map)}pi(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.jq(c);return!0}add(a){const b=this.map.get(a)||0;b>0||this.jq(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.jq(new Map([[a,-b]]))}has(a){return(this.map.get(a)||
0)>0}get values(){return[...Krb(this.map,a=>a>0).keys()]}[zvb](){return this.values[Symbol.iterator]()}constructor(a,b){super();this.domain=a;this.map=(Avb.F(this),void 0);this.map=new ftb(b)}};Bvb=class extends Qq{By(a){return new Avb(this.domain,a)}connect(a,b){return a.connect(b)}Xb(a){return a.Xb()}destroy(a,b){ka(this.domain.Hh(a.Xb(),b))}pi(a,b){return a.pi(b)}constructor(){super(Pq,Pq);this.domain=new yvb}};__c.Cvb=new Bvb;var Gvb,Hvb,Kvb,rr,Tvb,bwb,cwb,ewb,fwb;__c.Dvb=zp({id:Uq,version:Vq});__c.Evb=Mp({values:{app:__c.Dvb},attributes:{lla:Fp(__c.Hqb(Uq,Uq))}});__c.Fvb=Cp(-1,1);Gvb=Cp(0,100);Hvb=Cp(-100,100);__c.Ivb=Cp(0,1);__c.Jvb=Cp(-180,180);Kvb=Fp(Gvb);rr=Fp(Hvb);__c.Lvb=Fp(__c.Ivb);__c.Mvb=Fp(__c.Jvb);sr=__c.sr=Bp(__c.ntb);__c.Nvb=Ep(sr);__c.Ovb=Fp(__c.Nvb);__c.Pvb=Bp(/^100%$/);__c.Qvb=Bp(/^[0-9]+(\.[0-9]+)?%$/);__c.Rvb=Bp(/^[0-9]+(\.[0-9]+)?px/);__c.Svb=__c.Ip(Jp(Uq));__c.Ip(__c.wvb);Tvb=Lqb(0,10);
__c.Uvb=yp(Tvb,a=>a.length<=10);__c.Vvb=Fp(__c.Uvb);__c.Wvb=Bp(Lrb("L"));__c.Xvb=Bp(Lrb("T"));__c.Yvb=Fp(xp(1,2,3));__c.Zvb=zp({text:Uq,Q9:Tq});__c.$vb=xp(1,2);__c.awb=zp({top:Xq,left:Xq});bwb=zp({width:Yq,height:Yq});cwb=zp({top:Xq,left:Xq,height:Yq,width:Yq});__c.dwb=Fp(cwb);ewb=zp({text:Uq,user:Uq,brand:Uq});fwb=zp({text:Uq,url:Uq});var gwb,hwb,iwb,jwb,kwb,lwb,mwb,nwb;gwb=zp({type:xp("google-sheets"),url:Uq,b2a:Ep(Wq),VE:Uq,range:__c.Zq});hwb={POb:Bp(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};iwb=zp(hwb);jwb=zp({type:xp("copy-sheets"),b2a:Ep(Wq),Af:Uq,O7:Uq,Ae:yp(iwb)});kwb=zp({...hwb});lwb=zp({type:xp("live-sheets"),b2a:Ep(Wq),O7:Uq,Ae:yp(kwb)});mwb=zp({app:__c.Dvb,source:Uq,title:__c.Zq});nwb=zp({type:xp("app"),YYd:mwb,b2a:Ep(Wq)});
__c.owb=__c.Ap({"google-sheets":gwb,"copy-sheets":jwb,"live-sheets":lwb,app:nwb},a=>a.type);var pwb,qwb,tr,rwb,swb,twb,uwb,vwb,wwb,xwb,ywb,zwb,Awb,Bwb,Cwb,Dwb;pwb=Mp({attributes:{qjc:Fp(xp(1,2,3,4)),value:Fp(Xq)}});qwb=__c.Ip(Vq,pwb);tr=Mp({attributes:{I3a:__c.dr,ci:__c.dr},Gb:{M2:qwb}});rwb=tr.Nh({values:{type:xp("brightness")}});swb=tr.Nh({values:{type:xp("contrast")}});twb=tr.Nh({values:{type:xp("highlights")}});uwb=tr.Nh({values:{type:xp("shadows")}});vwb=tr.Nh({values:{type:xp("whites")}});wwb=tr.Nh({values:{type:xp("blacks")}});xwb=tr.Nh({values:{type:xp("saturation")}});ywb=tr.Nh({values:{type:xp("vibrance")}});
zwb=tr.Nh({values:{type:xp("temperature")}});Awb=tr.Nh({values:{type:xp("tint")}});Bwb=zp({id:Uq});Cwb=tr.Nh({values:{type:xp("lut"),b_a:Bwb}});Dwb=bq({brightness:rwb,contrast:swb,highlights:twb,shadows:uwb,whites:vwb,blacks:wwb,saturation:xwb,vibrance:ywb,temperature:zwb,tint:Awb,lut:Cwb},a=>a.type,a=>a.type);__c.Ewb=Op(Dwb);var Fwb,Gwb,Iwb,Kwb,Lwb,Nwb,Owb,Pwb,Qwb,Rwb,Swb,Twb;Fwb=zp({top:Xq,left:Xq,width:Yq,height:Yq,rotation:__c.Jvb});Gwb=zp({id:Uq,Mf:Xq});__c.Hwb=Mp({attributes:{Oba:Hp(Gwb),brightness:rr,contrast:rr,saturation:rr,oZ:rr,z4a:Kvb,blur:rr,cka:rr,LCa:rr,bma:Kvb,Qsa:Kvb,highlights:rr,K7:rr,IZ:Kvb,iwa:Kvb}});Iwb=Gp(Ep(__c.Hwb));__c.Jwb=Mp({values:{media:__c.Dvb},Gb:{filter:Iwb},attributes:{mD:Hp(__c.Dvb),ff:Hp(Fwb),hb:__c.Lvb,Nf:Fp(__c.Hqb(sr,sr)),altText:Hp(__c.Zvb)}});Kwb=Gp(Ep(__c.Jwb));Lwb=zp({Oc:Yq,Uu:Yq});
__c.Mwb=Mp({values:{video:Uq,id:__c.Zq},Gb:{filter:Iwb,Rs:__c.Ewb},attributes:{ff:Fp(Fwb),hb:__c.Lvb,Nf:Fp(__c.Hqb(sr,sr)),altText:Hp(__c.Zvb),trim:Hp(Lwb),Oqa:Fp(__c.$vb),autoplay:br,playbackRate:Hp(Cp(.25,4)),volume:Fp(Cp(0,4))}});Nwb=Gp(Ep(__c.Mwb));Owb=zp({color:sr,hb:__c.Ivb,position:Xq},a=>a.position>=-1&&a.position<=2);Pwb=yp(Owb,a=>a.length>=2&&a.every((b,c,d)=>c===0||d[c-1].position<=b.position));Qwb=Fp(Pwb);Rwb=Mp({values:{type:xp("linear")},attributes:{Dq:Qwb,rotation:__c.Mvb}});
Swb=Mp({values:{type:xp("radial")},attributes:{Dq:Qwb,center:Fp(__c.awb)}});__c.ur=bq({linear:Rwb,radial:Swb},a=>a.type,a=>a.type);Twb=Gp(Ep(__c.ur));__c.vr=Mp({Gb:{image:Kwb,video:Nwb,gradient:Twb},attributes:{dropTarget:__c.hub,color:__c.Ovb,hb:__c.Lvb,locked:br,bA:br,mL:__c.gr,mo:__c.gr,flipX:br,flipY:br}});__c.Uwb=Op(__c.vr);__c.wr=Mp({Gb:{fill:__c.vr},attributes:{weight:__c.er,color:__c.Ovb,Nn:__c.Vvb,us:br}});__c.Vwb=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return a!=="false";default:throw Error();}}validate(a){ka(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.c1c(a)}c1c(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.Scd=c}};__c.eq=Object.keys({Du:0})[0];
__c.Xrb=class{getScope(a){return this.attributes[a].scope}Xoa(a){if(typeof a==="function")return a;switch(a){case "all":return()=>!0;case "block":return this.Xze;case "inline":return this.HAe;default:throw new r(a);}}copy(a,b,c){__c.fq(this,b,a,(d,e)=>c[e]=d)}vP(a){for(const [b,c]of Object.entries(a))ka(this.Sy(b)),c!=null&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);b!=null&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return b!=null?a.normalize(b):void 0}encode(a,
b){return __c.dq(this.attributes[a],b)}decode(a,b){return __c.cq(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.bPa=b;this.oVa=c;this.R7e=d;this.Mh=ap(this.attributes,e=>e.defaultValue);this.Rzb={as:this.Mh,qja:ap(this.Mh,(e,f)=>e!=null?this.encode(f,e):void 0)};this.Sy=e=>e in this.attributes;this.Xze=e=>this.getScope(e)==="block";this.HAe=e=>this.getScope(e)==="inline";this.iHb=e=>{e=Nrb(e);return!(!e||!this.oVa.has(e))};this.fKa=e=>typeof e!=="string"?!1:__c.Prb(this,e)!=null;
this.Tcd=e=>{const f=this.R7e;return typeof e==="string"&&f.has(e)};this.CCa=(e,f,g)=>f===g?!0:f!=null&&g!=null?this.attributes[e].CCa(f,g):f==null&&g==null}};__c.Xrb.prototype.Y0=ea(165);
var Srb=class extends __c.Vwb{DSa(){return new Srb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}CCa(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);ka(Number.isInteger(b)&&b>=-2147483648);ka(Number.isInteger(c)&&c<=2147483647);ka(Number.isInteger(d));
ka(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.Mrb(this)}},Urb=class extends __c.Vwb{DSa(){return new Urb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}c1c(a){return a===0?a:Number(a.toPrecision(this.Qyd))}CCa(a,b){return a===b}encode(a){return`${this.Hxa==="fixed"&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,Qyd:d=6,Hxa:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);ka(Number.isFinite(b)&&b>=-Number.MAX_VALUE);ka(Number.isFinite(c)&&c<=Number.MAX_VALUE);ka(Number.isInteger(d)&&1<=d&&d<=15);this.min=b;this.max=c;this.units=g;this.Qyd=d;this.Hxa=e;__c.Mrb(this)}},Vrb=class extends __c.Vwb{isValid(a){return this.vAa.test(a)}DSa(){return new Vrb(this.scope,this.vAa,this.defaultValue,!0)}CCa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.vAa=
b;__c.Mrb(this)}},Wrb=class extends __c.Vwb{isValid(a){return this.QFd.has(a)}DSa(){return new Wrb(this.scope,this.QFd,this.defaultValue,!0)}CCa(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.QFd=new Set(b);__c.Mrb(this)}};var $wb,axb,bxb;__c.Wwb="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.Xwb=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.Ywb=["normal","italic"];__c.Zwb=["none","underline"];$wb=["start","center","end","justify"];
xr=__c.xr={fontFamily:jq("inline",__c.Xwb,"YACgEZ1cb1Q,0"),fontSize:iq("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:kq("inline",__c.Wwb),fontStyle:kq("inline",__c.Ywb),EL:jq("inline",__c.qtb,"1"),verticalAlign:jq("inline",__c.stb,"0%"),color:jq("inline",__c.ntb,"#000000"),backgroundColor:jq("inline",otb,"transparent"),f4:iq("inline",{min:0,max:.2,units:"em"}),e4:iq("inline",{min:0,max:.16,units:"em"}),km:kq("inline",__c.Zwb),rw:kq("inline",["none","strikethrough"]),link:jq("inline",__c.mtb,
""),letterSpacing:iq("inline",{min:-.2,max:.8,units:"em"}),lineHeight:iq("block",{min:.5,max:2.5,defaultValue:1.4}),direction:kq("block",["ltr","rtl"]),textAlign:kq("block",$wb),Px:kq("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),CG:__c.Trb({min:0}),marginInlineStart:__c.Trb({min:0,max:200,units:"px"}),textIndent:__c.Trb({min:0,max:32,units:"px"}),g5a:jq("inline",/^$/,""),h5a:jq("inline",/^$/,""),Yrb:jq("inline",/^$/,"")};
axb={ko:jq("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};bxb={...ap(xr,a=>a.DSa()),qA:kq("inline",["add","delete"]).DSa()};__c.yr=__c.Yrb({static:xr,nVa:axb,Du:bxb});__c.cxb=`${Object.keys({ko:0})[0]}/`;__c.dxb=Object.keys({qA:0})[0];var exb;exb=zp({Le:yp(Vq)});__c.fxb=Fp(exb);var ixb=class{c8(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(lq(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(Zrb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){ka(b>=0,"{} < 0",b);b&&(this.c8(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){this.mode!==0&&this.c8();return this.ops?new gxb(this.ops,this.pre,this.post):hxb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},jxb=class{static create(a,b,c,d=0,e=0){ka(d>=0,"{} < 0",d);ka(e>=0,"{} < 0",e);b=Math.max(0,d-b,e-c);return new jxb(b?[...a,lq(b)]:a)}get head(){return this.Gl}zy(a){return this.ZB(0,a).length}ZB(a,b=1){const c=m(this.Gl);if(c.type!==a)throw Error();const d=c.length;ka(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Gl=lq(d-b),lq(b);case 1:return this.Gl=Zrb(d-b),Zrb(b);default:throw new r(a);}else return this.Gl=this.ops[this.i++],c}finish(){la(this.Gl==null)}constructor(a){this.ops=a;this.i=0;this.Gl=a[this.i++]}},gxb=class{isEmpty(){return this.pre===0&&this.post===0&&this.ops.length===0}ld(a,b){return jxb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},hxb=new gxb([],0,0),kxb=class extends Oq{hg(){return new ixb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.hg(),d=a.ld(0,b.pre),e=b.ld(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(g.type===1)c.append(e.ZB(g.type,g.length));else if(f)if(f.type===1){var h=Math.min(f.length,g.length);d.ZB(f.type,h);e.ZB(g.type,h);c.append(Zrb(h))}else h=
Math.min(f.length,g.length),d.ZB(f.type,h),e.ZB(g.type,h),c.append(lq(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return fp(b,a);const c=a.ld(b.pre,0),d=b.ld(a.pre,0),e=this.hg(),f=this.hg();for(var g=c.head,h=d.head;g||h;){if(g&&g.type===1)h=c.ZB(g.type,g.length),f.append(lq(h.length)),e.append(h);else if(h&&h.type===1){var k=
d.ZB(h.type,h.length);f.append(k);e.append(lq(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.ZB(g.type,k),h=d.ZB(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return fp(f.build(),e.build())}Lk(){return hxb}Dj(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.ld();b=b.ld();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(d.type!==0||c.length!==d.length)return!1;
a.zy(c.length);b.zy(d.length);break;case 1:if(d.type!==1||c.length!==d.length)return!1;mq(a,c.length);mq(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return hxb}apply(a){return a}Yk(a){return a}Hh(a,b){return a===b}equals(a){return this===a||a instanceof kxb}},$rb=new Map,qq=new kxb;var mxb,oxb,nxb,lxb,qxb,csb,rxb,sxb;
mxb=class extends Oq{$f(){return new csb(this.BA)}ON(){return lxb}je(a={}){return{x:a.x||qq.hg().build(),y:a.y||qq.hg().build(),attrs:a.attrs||oq(this).build()}}isIdentity(a){return qq.isIdentity(a.x)&&qq.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=qq.compose(a.x,b.x),d=qq.compose(a.y,b.y);a=gsb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.je({x:c,y:d,attrs:a});const e=oq(this);esb(a,b.attrs,e,(f,g,h)=>{g?h?(la(this.BA(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}CHa(a,b,c,d){return qq.isIdentity(c)&&qq.isIdentity(d)||b.items.isEmpty()?b:fsb(a,this.BA,b,c,d)}transform(a,b){const c=ep.Rq(),{bt:d,Ft:e}=hp(c,qq.transform(a.x,b.x)),{bt:f,Ft:g}=hp(c,qq.transform(a.y,b.y));a=gsb(this,a.attrs,d,f);b=gsb(this,b.attrs,e,g);if(a.items.isEmpty()||b.items.isEmpty()){var h=this.je({x:d,y:f,attrs:b});a=this.je({x:e,y:g,attrs:a});return c.build(h,a)}var k=Math.max(a.Fp,b.Fp),l=Math.max(a.qz,b.qz);a=a.ld(void 0,k,l);k=b.ld(void 0,k,l);b=oq(this);
l=oq(this);for(var n=a.head,p=k.head;n||p;){if(n&&n.type===0||p&&p.type===0){n=a.kw();p=k.kw();const x=b.kw(),z=l.kw();for(var q=n.head,u=p.head;q||u;){if(q&&q.type===0||u&&u.type===0){q=n.Nu();u=p.Nu();for(h of dsb(q,u)){q=h;u=n.attrs[h];var w=p.attrs[h];u&&w?(la(this.BA(q,u.o,w.o)),q=gp({o:w.n,n:u.n})):q=fp(w,u);const {bt:B,Ft:C}=hp(c,q);x.sl(h,C);z.sl(h,B)}}else if(q&&u)q=Math.min(q.length,u.length),n.sn(q),p.sn(q),x.EA(q),z.EA(q);else if(q)q=q.length,n.sn(q),x.EA(q),z.EA(q);else if(u)q=u.length,
p.sn(q),x.EA(q),z.EA(q);else throw Error();q=n.head;u=p.head}n.finish();p.finish();x.finish();z.finish()}else if(n&&p)n=Math.min(n.length,p.length),pq(a,n),pq(k,n),b.rows(n),l.rows(n);else if(n)n=n.length,pq(a,n),b.rows(n),l.rows(n);else if(p)n=p.length,pq(k,n),b.rows(n),l.rows(n);else throw Error();n=a.head;p=k.head}a.finish();k.finish();h=this.je({x:d,y:f,attrs:l.build()});a=this.je({x:e,y:g,attrs:b.build()});return c.build(h,a)}Lk(a){a=a.attrs.ld();const b=oq(this);for(var c=a.head;c;){if(c.type===
0){c=a.kw();const e=b.kw();for(var d=c.head;d;){if(d.type===0){d=c.Nu();for(const f of xq(d))d=c.attrs[f],e.sl(f,d&&{o:d.n,n:d.o})}else d=d.length,c.sn(d),e.EA(d);d=c.head}c.finish();e.finish()}else c=c.length,pq(a,c),b.rows(c);c=a.head}return this.je({attrs:b.build()})}Dj(a,b){return qq.Dj(a.x,b.x)&&qq.Dj(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:qq.hg().build(),y:qq.hg().build(),attrs:oq(this).build()}}apply(a,b){a=this.CHa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=
this.$f();esb(a,b.attrs,c,(d,e,f)=>this.lZd(d,e,f));return c.build()}Yk(a,b){if(b.attrs.items.isEmpty())return this.CHa("unapply",a,b.x,b.y);const c=this.$f();esb(a,b.attrs,c,(d,e,f)=>this.hbf(d,e,f));return this.CHa("unapply",c.build(),b.x,b.y)}Hh(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof mxb?this.BA===a.BA:!1}constructor(a){super();this.BA=a;this.NBd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.BA(b,c.o,d.o)&&this.BA(b,e,f)}return!c&&!d};this.lZd=(b,
c,d)=>d!=null?(la(this.BA(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.hbf=(b,c,d)=>d!=null?(la(this.BA(b,c,d.n)),d.o):c}};
oxb=class{isEmpty(){return!this.items.length}ld(a){return new nxb(this.items,this.length,a)}forEach(a,{grad:b,yc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.ld();a=a.ld();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(e.type!==0)return!1;d=c.Nu();e=a.Nu();if(d!=null?e==null||
!b(d,e):e!=null)return!1;break;case 1:if(e.type!==1||d.length!==e.length)return!1;c.sn(d.length);a.sn(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.pxb=new oxb([],0);
nxb=class{get head(){return this.Gl}sn(a){var b=this.Gl;if(!b||b.type!==1)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Gl=a<b?hsb(b-a):this.input[this.i++];return a}Nu(){const a=this.Gl;if(a&&a.type!==1)return this.Gl=this.input[this.i++],a.value}finish(){la(this.Gl==null,"stream not empty: {}",this.Gl)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,hsb(c)]:a;this.Gl=this.input.length?this.input[this.i++]:void 0}};
rq=__c.rq=class{grad(a){if(a==null)return this;la(this.Epa==null,"nextGrad already set: {}",this.Epa);this.Epa=a;return this}yc(a){if(a<=0)return this;this.Epa!=null&&(this.Dpa&&(this.items.push(hsb(this.Dpa)),this.Dpa=0),this.items.push({type:0,value:this.Epa}),this.Epa=void 0);this.Dpa+=a;this.f3+=a;return this}build(){this.Epa!=null?(la(this.Dpa!==0),this.items.push(hsb(this.Dpa)),this.items.push({type:0,value:this.Epa}),this.Dpa=0,this.Epa=void 0):this.f3-=this.Dpa;return new oxb(this.items,this.f3)}constructor(){this.items=
[];this.Dpa=this.f3=0;this.Epa=void 0}};
wq=__c.wq=class{static of(a,b,c,d){return b.isEmpty()?lxb:new wq(a,b,c,d)}ld(a=()=>!0,b=0,c=0){b=Math.max(this.Fp,b);c=Math.max(this.qz,c);const d=this.items.ld(c);return new qxb(this.BA,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.ld(a,c,d);c=a.head;let e=0;for(;c;)e=c.type!==0&&a.xKe?e+pq(a,c.length):e+a.S6b((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.kw;this.items.forEach(this.items.length,{yc:a.rows,grad:c=>{const {EA:d,grad:e,Bdb:f}=b();c.forEach(c.length,{yc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof wq&&this.qz===a.qz&&this.Fp===a.Fp?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>msb(this.BA,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",bsb))}constructor(a,b,c,d){this.BA=a;this.items=b;this.Fp=c;this.qz=d}};lxb=new wq((a,b,c)=>b===c,__c.pxb,0,0);
qxb=class{get head(){return this.mVa.head}S6b(a){la(this.TV==null);const b=this.kw();var c=b.head;let d=0;for(;c;){if(c.type===0)b.Nu();else{c=b.sn(c.length);if(!yq(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?pq(this,1):0}get xKe(){la(this.head!=null);la(this.TV==null);return this.head.type===1&&this.aA.isEmpty()}kw(){la(this.TV==null);var a=this.mVa.Nu();if(a){a=a.ld(this.Fp);for(var b=this.aA.ld(this.Fp),c=new rq,d=a.head,e=b.head;d||e;){if(d&&
d.type===0||e&&e.type===0){const g=a.Nu(),h=b.Nu();b:{d=this.FFa;e=this.Xoa;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];ka(isb(d,f,h===null||h===void 0?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=yq(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.sn(d),b.sn(d),c.yc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.aA;this.TV=f;return new rxb(this.FFa,this.Xoa,this.TV.ld(this.Fp),this.Arc)}finish(){la(this.TV==
null);this.mVa.finish()}constructor(a,b,c,d,e){this.FFa=a;this.mVa=b;this.Xoa=c;this.Fp=d;this.qz=e;this.aA=__c.pxb;this.TV=void 0;this.Arc=()=>{la(this.TV!=null);this.aA=this.TV;this.TV=void 0}}};
csb=class{kw(){la(this.Pqb==null);return this.Pqb=new sxb(this.BA,this.v6d)}rows(a){this.p$b.yc(a);return this}build(){la(this.Pqb==null);la(this.aA.isEmpty(),"prevDxs not empty: {}",this.aA);const a=this.p$b.build();return wq.of(this.BA,a,this.Fp,a.length)}constructor(a){this.BA=a;this.p$b=new rq;this.Fp=0;this.aA=__c.pxb;this.Pqb=void 0;this.v6d=b=>{la(this.Pqb!=null);this.Fp=Math.max(this.Fp,b.length);var c=this.aA.ld(this.Fp);const d=b.ld(this.Fp),e=new rq;for(var f=c.head,g=d.head;f||g;){if(f&&
f.type===0||g&&g.type===0)f=c.Nu(),g=d.Nu(),f=__c.lsb(this.BA,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.sn(f),d.sn(f),e.yc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.p$b.grad(c);this.aA=b;this.Pqb=void 0}}};
rxb=class{get attrs(){return this.nH}get head(){return this.QAb.head}sn(a){return this.QAb.sn(a)}Nu(){const a=this.QAb.Nu();this.ila(a);return a}finish(){this.QAb.finish();this.mk()}ila(a){if(a)for(const b in a){if(!this.Xoa(b))continue;const c=__c.jsb(this.FFa,b,this.nH[b],a[b]);c==null?delete this.nH[b]:this.nH[b]=c}}constructor(a,b,c,d){this.FFa=a;this.Xoa=b;this.QAb=c;this.mk=d;this.nH={}}};
sxb=class{sl(a,b){var c=this.FFa,d=this.nH[a];(b=c(a,d,b)?void 0:{ac:d,r:b})?(this.tI||(this.tI={}),this.tI[a]=b):this.tI&&(delete this.tI[a],yq(this.tI)&&(this.tI=void 0));return this}attrs(a){for(const b of xq(a))this.sl(b,a[b]);return this}EA(a){if(a<=0)return this;this.ila();this.Lva.yc(a);return this}ila(){if(this.tI){var a=this.tI;this.tI=void 0;for(const b in a){const c=__c.jsb(this.FFa,b,this.nH[b],a[b]);c==null?delete this.nH[b]:this.nH[b]=c}this.Lva.grad(a)}}finish(){this.ila();la(yq(this.nH));
const a=this.Lva.build();this.mk(a)}constructor(a,b){this.FFa=a;this.mk=b;this.nH={};this.tI=void 0;this.Lva=new rq}};var txb=class extends Rq{get Fp(){return this.grid.Fp}get qz(){return this.grid.qz}set(a,b,c){const {j6e:d,W5e:e,RBb:f=d,Rke:g=e}=b;b=new Set;const h=oq(this.domain);h.rows(d);for(let n=d;n<=f;n++){const p=h.kw();p.EA(e);for(let q=e;q<=g;q++){var k=this.grid.get(n,q);k=nsb(this,a,k,c);for(const u of b)p.sl(u);p.attrs(k);for(const u of Object.keys(k))b.add(u);p.EA(1)}for(const q of b)p.sl(q);p.finish();h.rows(1)}a=h.kw();a.EA(e);for(c=e;c<=g;c++){for(var l of b)a.sl(l);a.EA(1)}for(const n of b)a.sl(n);
a.finish();l=this.domain.je({attrs:h.build()});this.jq(l)}write(a,b,c){c==null||Object.keys(c).length===0?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(b!=null&&(a=__c.gq(this.Kg,a,b),Object.keys(a).length!==0))return a}iT(){const a=this.domain.$f();for(let b=0;b<=this.qz;b++){const c=a.kw();let d={};for(let e=0;e<=this.Fp;e++){const f=this.grid.get(b,e);for(const g of qsb(d,f))c.sl(g,f&&f[g]);d=f;c.EA(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=this.Xb();
la(this.domain.Hh(b,a))}pi(a){const b=this.Xb(),c=oq(this.domain);esb(b,a,c,(d,e,f)=>e==null&&f==null?void 0:{o:e,n:f});this.jq(this.domain.je({attrs:c.build()}));return!0}zZ(a){this.m2b(a.x);this.n2b(a.y);psb(this,a.attrs)}m2b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.ld();for(var c=a.head;c;)c.type===0?b+=a.zy(c.length):(c=mq(a,c.length),xqb(this.grid,b,c),b+=c),c=a.head}}n2b(a){let b=0;a=a.ld();for(var c=a.head;c;)c.type===0?b+=a.zy(c.length):(c=mq(a,c.length),yqb(this.grid,b,c),b+=c),c=a.head}constructor(a,
b,c){super();this.Kg=a;this.domain=b;this.grid=new Ptb;c.forEach(a.Sy,(d,e,f)=>{Object.keys(f).length===0||this.grid.set(d,e,f)});la(this.domain.Hh(c,this.iT()))}},uxb=class extends Ntb{$f(){return this.domain.$f()}By(a){return new txb(this.Kg,this.domain,a)}Cm(a){return a}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(){var a=__c.zr;super();this.Kg=a;this.domain=new mxb(a.CCa)}};__c.wxb=class{get Fp(){return this.grid.Fp}get qz(){return this.grid.qz}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,zq(b,c,d.right,d.bottom))})}map(a){const b=new vxb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(c!=null&&(c=c.cells[a],c!=null))return __c.rsb(zq(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.rsb(c,b))});return a}ld(){return this.grid.ld()}constructor(a){this.grid=
a}};__c.wxb.prototype.sjc=ea(166);
var vxb=class{add(a,b){Csb(this.a6d,a);this.hud.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.hud.build();return a.isEmpty?xxb:new __c.wxb(a)}constructor(){this.hud=new yxb;this.a6d=new zxb}},Axb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},Bxb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Bq=class{add(a,b,c){if(c==
null)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=zq(a,b,c.bounds.o.right,c.bounds.o.bottom);Csb(this.tkd,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=zq(a,b,c.bounds.n.right,c.bounds.n.bottom),Csb(this.zjd,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.RXa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=zq(a,b,c.o.right,c.o.bottom),Csb(this.tkd,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=zq(a,b,c.n.right,c.n.bottom),Csb(this.zjd,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.RXa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.RXa.build()}constructor(){this.RXa=new yxb;this.tkd=new zxb;this.zjd=new zxb}},Dxb=class{get isEmpty(){return this.rows.length===0}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}ld(){return new Cxb(this.rows)}constructor(a,b,c){this.rows=
a;this.Fp=b;this.qz=c}},Cxb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}Gr(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;ssb(this);b.cells[this.x]==null&&(this.y++,this.x=0,tsb(this),ssb(this));return a}finish(){la(this.head==null)}constructor(a){this.rows=a;this.x=this.y=0;tsb(this);ssb(this)}},yxb=class{add(a,b,c,d,e){ka(a<=c);ka(b<=d);this.Y6==null||this.Y6.y<b?(this.flush(),this.rows.length&&la(this.rows.length<=b),this.Y6=
{y:b,tnc:d,cells:[]},this.Y6.cells[a]=e):this.Y6.y===b?(la(this.Y6.cells.length<=a),this.Y6.tnc=Math.max(this.Y6.tnc,d),this.Y6.cells[a]=e):la(this.Y6.y>b);this.Fp=Math.max(this.Fp,c+1);this.qz=Math.max(this.qz,d+1);return this}flush(){if(this.Y6){const {y:a,...b}=this.Y6;this.rows[a]=b;this.Y6=void 0}}build(){this.flush();return new Dxb(this.rows,this.Fp,this.qz)}constructor(){this.rows=[];this.qz=this.Fp=0}},xxb=new __c.wxb(new Dxb([],0,0)),Exb=class extends Oq{$f(){return new vxb}ON(){return xxb}replace(a,
b){return new Axb(a,b)}update(a,b){a=a==null||Aq(a.o,a.n)?void 0:a;b=b==null||this.component.isIdentity(b)?void 0:b;return a!=null||b!=null?new Bxb(a,b):void 0}je(a={}){const b=a.cells||(new Bq).build();return{x:a.x||qq.hg().build(),y:a.y||qq.hg().build(),cells:b,T_:a.T_||Ar.project(b)}}isIdentity(a){return qq.isIdentity(a.x)&&qq.isIdentity(a.y)&&a.cells.isEmpty&&Ar.isIdentity(a.T_)}compose(a,b){const c=usb(this,a.cells,b.x,b.y),d=Ar.expand(a.T_,b.x,b.y);return{x:qq.compose(a.x,b.x),y:qq.compose(a.y,
b.y),cells:xsb(this,c,b.cells),T_:Ar.compose(d,b.T_)}}transform(a,b){const c=ep.Rq(),{bt:d,Ft:e}=hp(c,qq.transform(a.x,b.x)),{bt:f,Ft:g}=hp(c,qq.transform(a.y,b.y)),h=usb(this,a.cells,d,f),k=usb(this,b.cells,e,g);a=Ar.expand(a.T_,d,f);b=Ar.expand(b.T_,e,g);const {bt:l,Ft:n}=hp(c,Ar.transform(a,b)),p=new zxb,q=Ar.cursor(a,Math.max(h.Fp,k.Fp),Math.max(h.qz,k.qz)),u=new Bq,w=new Bq;vsb(h.ld(),k.ld(),(x,z,B,C)=>{if(B!=null||C!=null){a:if(B==null||C==null)var E=fp(C,B);else switch(B.type){case 1:b:{switch(C.type){case 1:E=
ep.Rq();const {bt:L,Ft:N}=B.delta&&C.delta?hp(E,this.component.transform(B.delta,C.delta)):fp(C.delta,B.delta);if(B.bounds&&C.bounds){B=B.bounds;C=C.bounds;la(Aq(B.o,C.o));const U={right:Math.min(B.n.right,C.n.right),bottom:Math.min(B.n.bottom,C.n.bottom)},Y=ep.Rq();Mpb(Y,!Aq(C.n,U));Npb(Y,!Aq(B.n,U));B=Y.build({o:C.n,n:U},{o:B.n,n:U});B=hp(E,B)}else B=fp(C.bounds,B.bounds);const {bt:R,Ft:T}=B;E=E.build(this.update(R,L),this.update(T,N));break b;case 0:la(C.o!=null);B.bounds&&la(Aq(B.bounds.o,C.o));
E=new ep(this.replace({...(B.bounds?B.bounds.n:C.o),state:B.delta?this.component.apply(C.o.state,B.delta):C.o.state},C.n),void 0,!1,!0);break b;default:throw new r(C);}E=void 0}break a;case 0:b:switch(C.type){case 1:la(B.o!=null);C.bounds&&la(Aq(B.o,C.bounds.o));E=gp(this.replace({...(C.bounds?C.bounds.n:B.o),state:C.delta?this.component.apply(B.o.state,C.delta):B.o.state},B.n));break b;case 0:la(Cq(this,B.o,C.o));E=gp(this.replace(C.n,B.n));break b;default:throw new r(C);}break a;default:throw new r(B);
}var {bt:H,Ft:I}=hp(c,E);H&&(E=Asb(this,x,z,H,p,q))&&(H=wsb(this,H,E),I=wsb(this,I,E),Mpb(c));H&&w.add(x,z,H);I&&u.add(x,z,I)}});q.finish();return c.build({x:d,y:f,cells:w.build(),T_:l},{x:e,y:g,cells:u.build(),T_:n})}Lk(a){const b=new Bq;a.cells.forEach((d,e,f)=>{if(f!=null)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.Lk(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:qq.Lk(a.x),
y:qq.Lk(a.y),cells:c,T_:Ar.project(c)}}Dj(a,b){var c;if(c=qq.Dj(a.x,b.x)&&qq.Dj(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.Fp!==d.Fp||c.qz!==d.qz)c=!1;else{c=c.ld();d=d.ld();for(var e=c.head,f=d.head;e||f;){var g;(g=e==null)||(g=f==null)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(e==null||f==null?e===f:e.type===0&&f.type===0?Cq(this,e.o,f.o)&&Cq(this,e.n,f.n):e.type===1&&f.type===1&&(e.bounds&&f.bounds?Aq(e.bounds.o,f.bounds.o)&&Aq(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&
f.delta?this.component.Dj(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.Gr();d.Gr();e=c.head;f=d.head}c=!0}}return c&&Ar.Dj(a.T_,b.T_)}identity(){return this.je()}apply(a,b){a=this.CHa(a,b.x,b.y);const c=this.$f();vsb(a.ld(),b.cells.ld(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)la(f!=null),c.add(zq(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:la(f!=null);g.bounds&&la(Aq(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,
g.delta):f.state);break;case 0:g.o&&(la(f!=null),la(Cq(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}CHa(a,b,c){if(qq.isIdentity(b)&&qq.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=nq(b,d),g=nq(c,e),h=new vxb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};
h.add(l,k)});return h.build()}Yk(a,b){const c=this.$f();vsb(a.ld(),b.cells.ld(),(d,e,f,g)=>{if(f!=null||g!=null)if(g==null)la(f!=null),c.add(zq(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:la(f!=null);g.bounds&&la(Aq(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Yk(f.state,g.delta):f.state);break;case 0:g.n&&(la(f!=null),la(Cq(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.XUb(c.build(),
b.x,b.y)}XUb(a,b,c){if(qq.isIdentity(b)&&qq.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=asb(b,d),g=asb(c,e),h=new vxb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Hh(a,b){if(a===b)return!0;a=a.ld();b=b.ld();let c=a.head,d=b.head;for(;c||d;){if(c==null||d==null||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||
c.value.right!==d.value.right||!this.component.Hh(c.value.state,d.value.state))return!1;a.Gr();b.Gr();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Exb&&this.component.equals(a.component)}constructor(a){super();this.component=a}},zxb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){la(!this.readBuffer(c,b));const {dHd:d,hHd:e}=Dsb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {dHd:c,hHd:d}=Dsb(this,a,
b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.gta=this.Dda=0}},Fxb=class extends Oq{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.P8a.$f();esb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return fp(b,a)}Lk(a){return a}Dj(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Yk(a){return a}Hh(a,b){return a===b}equals(a){return this===a||a instanceof Fxb}hg(){return new Gxb(()=>
this.P8a.$f(),a=>Kpb(this,a))}cursor(a,b,c){return new Hxb(a,b,c)}project(a){const b=this.hg();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(zq(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(zq(c,d,e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.P8a.je({x:Esb(b),y:Esb(c)});return this.P8a.apply(a,b)}constructor(){super();this.P8a=new mxb((a,b,c)=>b===c);this.id=this.P8a.$f().build()}},Gxb=class{add(a){const b=this.RXa(),c=
a.left*2,d=a.top*2,e=a.right*2;a=a.bottom*2;b.rows(d);b.kw().EA(c).attrs({value:!0}).EA(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.kw().EA(c).attrs({value:void 0}).EA(e-c+1).attrs({value:void 0}).finish();this.R4.push(b.build());return this}build(){return this.R4.length?this.reduce(this.R4):this.RXa().build()}constructor(a,b){this.RXa=a;this.reduce=b;this.R4=[]}},Hxb=class{get kHd(){la(this.Jka%2===0);return this.Jka/2}kw(){la(this.WDa===0);this.WR=this.ld.kw();return this}get value(){la(this.WR!=
null);return this.WR.attrs.value}S6b(a){la(this.WR!=null);for(var b=this.WR.head;b!=null;){if(b.type===0)this.WR.Nu();else if(b=this.WR.sn(b.length),this.Jka%2===0&&this.WR.attrs.value)for(let c=0;c<b;c++)this.WDa%2===0&&a(this.WDa/2,this.Jka/2),this.WDa++;else this.WDa+=b;b=this.WR.head}return this}Bdb(){for(la(this.WR!=null);this.WR.head;)this.WR.head.type===0?this.WR.Nu():this.WR.sn(this.WR.head.length);this.WR.finish();this.WR=void 0;this.WDa=0;return this}finish(){ysb(this,this.ld.qz);this.ld.head&&
(this.kw(),this.Bdb());this.ld.finish()}constructor(a,b,c){this.WDa=this.Jka=0;this.ld=a.ld(void 0,b*2,c*2)}},Ar=new Fxb;var Kxb=class extends Rq{get(a,b){a=this.grid.get(a,b);if(a!=null)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.NJa.left===d&&b.NJa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Bq).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.jq(this.domain.compose(Fsb(this,a),this.domain.je({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.jq(Fsb(this,a))}createRef(a,b){var c=this.grid;var d={left:wqb(this.grid,b.left),top:vqb(this.grid,
b.top),right:wqb(this.grid,b.right),bottom:vqb(this.grid,b.bottom)};c=new Ixb(c,d);d=tp(this,Gsb(this,c));const {mutable:e,bw:f}=up(this.type,a,d);a=new Jxb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}k9b(a,b,c){la(a.span.left===c.left);la(a.span.top===c.top);la(a.span.right===c.right);la(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)la(this.grid.get(d,e)===a),this.grid.delete(d,e);vp(this.type,b,a.to,a.value)}zZ(a){this.m2b(a.x);
this.n2b(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){la(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;la(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)la(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)la(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.NJa.right=wqb(this.grid,d);e.NJa.bottom=vqb(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),la(e.span.left===b&&e.span.top===c),la(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.k9b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)la(this.grid.get(e,h)==null),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)la(this.grid.get(f,b)==null),this.grid.set(f,b,g);g.NJa.right=wqb(this.grid,d.right);g.NJa.bottom=vqb(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}m2b(a){if(a.pre!==0||a.post!==0){var b=0;a=a.ld();for(var c=a.head;c;)c.type===0?b+=a.zy(c.length):
(c=mq(a,c.length),xqb(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}n2b(a){let b=0;a=a.ld();for(var c=a.head;c;)c.type===0?b+=a.zy(c.length):(c=mq(a,c.length),yqb(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}iT(){const a=this.domain.$f();for(let b=0;b<this.grid.qz;b++)for(let c=0;c<this.grid.Fp;c++){const d=this.grid.get(b,c);d!=null&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.Xb(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.qz;d++)for(let e=
0;e<this.grid.Fp;e++){const f=this.grid.get(d,e);if(f==null||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));la(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}la(c===b)}pi(a){const b=new Bq,c=new Bq;for(let d=0;d<this.grid.qz;d++)for(let e=0;e<this.grid.Fp;e++){const f=this.grid.get(d,e);f!=null&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.Xb(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.jq(this.domain.compose(this.domain.je({cells:b.build()}),this.domain.je({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new Ptb;c.forEach((d,e)=>{this.createRef(d,e)})}},Jxb=class{get span(){return this.NJa.jnd.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.NJa=d}},Ixb=class{get right(){return this.tPc.get()}set right(a){this.tPc.set(a)}get bottom(){return this.ZOc.get()}set bottom(a){this.ZOc.set(a)}constructor(a,
b){this.UFb=a;this.jnd=Kp(()=>({left:m(this.UFb.f6b.get(this.left)),top:m(this.UFb.gyc.get(this.top)),right:m(this.UFb.f6b.get(this.right)),bottom:m(this.UFb.gyc.get(this.bottom))}),{equals:__c.dtb.structural});this.left=b.left;this.top=b.top;this.tPc=new Sq(b.right);this.ZOc=new Sq(b.bottom)}},Lxb=class extends Qq{By(a){return new Kxb(this.type,this.domain,a)}Cm(a){return a}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){return this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(a){super(Pq,
Pq);this.type=a;this.domain=new Exb(this.type.domain)}};var Mxb,Nxb,Dq,Hsb,Br,Oxb,Pxb,Qxb;Mxb=new Map;Nxb=class{ordinal(a,b){b!=null?this.E7a.set(a,b):this.E7a.delete(a);return this}Lj(a){a.forEach((b,c)=>this.E7a.set(c,b));return this}build(){return this.E7a.size?this.E7a:Mxb}constructor(){this.E7a=new Map}};Dq=class{toString(){var a,b;return`R(${(a=this.oldValue)!==null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
Hsb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Br=class{static create(a,b){const c=qq.isIdentity(a),d=b.size===0;return c&&d?Oxb:new Br(c?Oxb.axis:a,d?Oxb.Lj:b)}toString(){const a=[...this.Lj].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.Lj=b}};Oxb=new Br(qq.hg().build(),new Map);
Pxb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Br.create(this.axis.build(),this.Lj)}constructor(){this.Lj=new Map;this.axis=qq.hg()}};
Qxb=class extends Oq{$f(){return new Nxb}hg(){return new Pxb}replace(a,b,c){return Eq(this.hg(),a,b,c).build()}update(a,b,c){return Isb(this.hg(),a,b,c).build()}je(a,b){return Br.create(a,b)}isIdentity(a){return qq.isIdentity(a.axis)&&!a.Lj.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=Ksb(a.Lj,b.axis),d=new Map;for(const h of Jsb(c,b.Lj)){var e=c.get(h);const k=b.Lj.get(h);if(e&&k){var f=d,g=f.set;a:{cp(e.newValue,k.oldValue);switch(e.type){case 0:e=new Dq(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Dq(e.oldValue,k.newValue);break a;case 1:e=new Hsb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}e=void 0}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Br.create(qq.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return fp(b,a);const c=ep.Rq(),{bt:d,Ft:e}=hp(c,qq.transform(a.axis,b.axis));a=Ksb(a.Lj,d);const f=Ksb(b.Lj,e);b=new Map;const g=new Map;for(var h of Jsb(a,f)){var k=
a.get(h);const l=f.get(h);if(k&&l){a:{cp(k.oldValue,l.oldValue);switch(k.type){case 0:k=gp(new Dq(l.newValue,k.newValue));break a;case 1:switch(l.type){case 0:k=new ep(new Dq(k.newValue,l.newValue),void 0,!1,!0);break a;case 1:k=gp(new Hsb(l.newValue,k.newValue));break a;default:throw new r(l);}default:throw new r(k);}k=void 0}const {bt:n,Ft:p}=hp(c,k);p&&b.set(h,p);n&&g.set(h,n)}else k?b.set(h,k):l&&g.set(h,l)}h=Br.create(d,g);a=Br.create(e,b);return c.build(h,a)}Lk(a){const b=a.Lj.size===0?a.Lj:
$g(a.Lj,c=>{switch(c.type){case 0:return new Dq(c.newValue,c.oldValue);case 1:return new Hsb(c.newValue,c.oldValue);default:throw new r(c);}});return Br.create(qq.Lk(a.axis),b)}Dj(a,b){if(a===b)return!0;if(!qq.Dj(a.axis,b.axis)||a.Lj.size!==b.Lj.size)return!1;for(const e of a.Lj.keys()){var c=a.Lj.get(e),d=b.Lj.get(e);if(c!==d&&(c==null||d==null||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return Oxb}apply(a,b){if(this.isIdentity(b)||!a.size&&!b.Lj.size)return a;
a=this.CHa(a,b.axis);if(!b.Lj.size)return a;const c=new Map(a);for(const [d,e]of b.Lj)b=a.get(d),cp(b,e.oldValue),e.newValue!=null?c.set(d,e.newValue):c.delete(d);return c}CHa(a,b){if(qq.isIdentity(b))return a;const c=new Set(a.values()),d=nq(b,c);return $g(a,e=>m(d.get(e)))}Yk(a,b){if(this.isIdentity(b)||!a.size&&!b.Lj.size)return a;if(!b.Lj.size)return this.XUb(a,b.axis);const c=new Map(a);for(const [d,e]of b.Lj){const f=a.get(d);cp(f,e.newValue);e.oldValue!=null?c.set(d,e.oldValue):c.delete(d)}return this.XUb(c,
b.axis)}XUb(a,b){if(qq.isIdentity(b))return a;const c=new Set(a.values()),d=asb(b,c);return $g(a,e=>m(d.get(e)))}Hh(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof Qxb}constructor(){super();this.ON=Mxb}};Hq=__c.Hq=new Qxb;var Rxb=new Map,Gq=class{static from(a){if(a instanceof Gq)return a;if(Array.isArray(a)){const [b,c]=a;return new Gq(b,c)}return new Gq(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},Sxb=class{range(a,b){b?this.T8.set(a,Gq.from(b)):this.T8.delete(a);return this}Ae(a){a.forEach((b,c)=>this.T8.set(c,Gq.from(b)));return this}build(){return this.T8.size?this.T8:Rxb}constructor(){this.T8=new Map}},Psb=class{toString(){var a,b;return`R(${(a=this.oldValue)!==
null&&a!==void 0?a:"_"},${(b=this.newValue)!==null&&b!==void 0?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Iq=class{static from(a){if(a instanceof Iq)return a;if(Array.isArray(a)){const [b,c]=a;return new Iq(b,c)}return new Iq(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},Qsb=class{toString(){var a,b;return`U(${(a=this.start)!==null&&a!==void 0?a:"_"},${(b=this.end)!==null&&b!==void 0?
b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},Rsb=class{static create(a,b){const c=qq.isIdentity(a),d=b.size===0;return c&&d?Txb:new Rsb(c?Txb.axis:a,d?Txb.Ae:b)}toString(){return`{${this.axis}|${[...this.Ae].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Ae=b}},Txb=new Rsb(qq.hg().build(),new Map),Uxb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}n2a(a,b,c){this.Ae.set(a,new Psb(b&&Gq.from(b),c&&Gq.from(c)));
return this}createRange(a,b){return this.n2a(a,void 0,b)}build(){return Rsb.create(this.axis.build(),this.Ae)}constructor(){this.Ae=new Map;this.axis=qq.hg()}},Cr,Vxb;la(!0);Cr=Hq.map(Ssb,Osb,Nsb,Msb);
Vxb=class extends Oq{$f(){return new Sxb}hg(){return new Uxb}replace(a,b,c){return this.hg().n2a(a,b,c).build()}update(a,b,c){var d=this.hg();d.Ae.set(a,new Qsb(b&&Iq.from(b),c&&Iq.from(c)));return d.build()}je(a,b){return Rsb.create(a,b)}isIdentity(a){return Cr.isIdentity(a)}compose(a,b){return Cr.compose(a,b)}transform(a,b){return Cr.transform(a,b)}Lk(a){return Cr.Lk(a)}Dj(a,b){return Cr.Dj(a,b)}identity(a){return Cr.identity(a)}apply(a,b){return Cr.apply(a,b)}Yk(a,b){return Cr.Yk(a,b)}Hh(a,b){return Cr.Hh(a,
b)}equals(a){return Cr.equals(a)}constructor(){super();this.ON=Rxb}};Dr=__c.Dr=new Vxb;var Wxb=class extends Oq{je(a){return{rows:a.rows||this.rows.hg().build(),cols:a.cols||this.cols.hg().build(),Fn:a.Fn||Dr.hg().build().Ae,En:a.En||Hq.hg().build().Lj,qn:a.qn||Dr.hg().build().Ae,Rm:a.Rm||Hq.hg().build().Lj,cells:a.cells||Kq(this.cells.je({}),this.cols.hg().build(),this.rows.hg().build()),attrs:a.attrs||Kq(this.attrs.je({}),this.cols.hg().build(),this.rows.hg().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&a.Fn.size===0&&a.En.size===0&&a.qn.size===
0&&a.Rm.size===0&&a.cells.cells.isEmpty&&Ar.isIdentity(a.cells.T_)&&a.attrs.attrs.items.isEmpty()}compose(a,b){const c=Jq(a.cols),d=Jq(a.rows),e=Jq(b.cols),f=Jq(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=Dr.compose(Dr.je(d,a.Fn),Dr.je(f,b.Fn)).Ae,l=Hq.compose(Hq.je(d,a.En),Hq.je(f,b.En)).Lj,n=Dr.compose(Dr.je(c,a.qn),Dr.je(e,b.qn)).Ae,p=Hq.compose(Hq.je(c,a.Rm),Hq.je(e,b.Rm)).Lj,q=this.cells.compose(this.cells.je({...a.cells,x:c,y:d}),this.cells.je({...b.cells,
x:e,y:f}));a=this.attrs.compose(this.attrs.je({...a.attrs,x:c,y:d}),this.attrs.je({...b.attrs,x:e,y:f}));return{rows:g,cols:h,Fn:k,En:l,qn:n,Rm:p,cells:Kq(q,h,g),attrs:Kq(a,h,g)}}transform(a,b){const c=Jq(a.cols),d=Jq(a.rows),e=Jq(b.cols),f=Jq(b.rows),g=ep.Rq(),{bt:h,Ft:k}=hp(g,this.rows.transform(a.rows,b.rows)),{bt:l,Ft:n}=hp(g,this.cols.transform(a.cols,b.cols)),{bt:{Ae:p},Ft:{Ae:q}}=hp(g,Dr.transform(Dr.je(d,a.Fn),Dr.je(f,b.Fn))),{bt:{Lj:u},Ft:{Lj:w}}=hp(g,Hq.transform(Hq.je(d,a.En),Hq.je(f,b.En))),
{bt:{Ae:x},Ft:{Ae:z}}=hp(g,Dr.transform(Dr.je(c,a.qn),Dr.je(e,b.qn))),{bt:{Lj:B},Ft:{Lj:C}}=hp(g,Hq.transform(Hq.je(c,a.Rm),Hq.je(e,b.Rm))),{bt:E,Ft:H}=hp(g,this.cells.transform(this.cells.je({...a.cells,x:c,y:d}),this.cells.je({...b.cells,x:e,y:f}))),{bt:I,Ft:L}=hp(g,this.attrs.transform(this.attrs.je({...a.attrs,x:c,y:d}),this.attrs.je({...b.attrs,x:e,y:f})));a={rows:h,cols:l,Fn:p,En:u,qn:x,Rm:B,cells:Kq(E,l,h),attrs:Kq(I,l,h)};b={rows:k,cols:n,Fn:q,En:w,qn:z,Rm:C,cells:Kq(H,n,k),attrs:Kq(L,n,k)};
return g.build(a,b)}Lk(a){const b=Jq(a.cols),c=Jq(a.rows),d=this.rows.Lk(a.rows),e=this.cols.Lk(a.cols),f=Dr.Lk(Dr.je(c,a.Fn)).Ae,g=Hq.Lk(Hq.je(c,a.En)).Lj,h=Dr.Lk(Dr.je(b,a.qn)).Ae,k=Hq.Lk(Hq.je(b,a.Rm)).Lj,l=this.cells.Lk({...a.cells,x:b,y:c});a=this.attrs.Lk(this.attrs.je({...a.attrs,x:b,y:c}));return{rows:d,cols:e,Fn:f,En:g,qn:h,Rm:k,cells:Kq(l,e,d),attrs:Kq(a,e,d)}}Dj(a,b){return this.rows.Dj(a.rows,b.rows)&&this.cols.Dj(a.cols,b.cols)&&Dr.Dj(Dr.je(qq.identity(),a.Fn),Dr.je(qq.identity(),b.Fn))&&
Hq.Dj(Hq.je(qq.identity(),a.En),Hq.je(qq.identity(),b.En))&&Dr.Dj(Dr.je(qq.identity(),a.qn),Dr.je(qq.identity(),b.qn))&&Hq.Dj(Hq.je(qq.identity(),a.Rm),Hq.je(qq.identity(),b.Rm))&&this.cells.Dj(this.cells.je(a.cells),this.cells.je(b.cells))&&this.attrs.Dj(this.attrs.je(a.attrs),this.attrs.je(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),Fn:Dr.identity(a.Fn).Ae,En:Hq.identity(a.En).Lj,qn:Dr.identity(a.qn).Ae,Rm:Hq.identity(a.Rm).Lj,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Jq(b.cols),d=Jq(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=Dr.apply(a.Fn,Dr.je(d,b.Fn)),h=Hq.apply(a.En,Hq.je(d,b.En)),k=Dr.apply(a.qn,Dr.je(c,b.qn)),l=Hq.apply(a.Rm,Hq.je(c,b.Rm)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.je({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Fn:g,En:h,qn:k,Rm:l,cells:n,attrs:a}}Yk(a,b){if(this.isIdentity(b))return a;
const c=Jq(b.cols),d=Jq(b.rows),e=this.rows.Yk(a.rows,b.rows),f=this.cols.Yk(a.cols,b.cols),g=Dr.Yk(a.Fn,Dr.je(d,b.Fn)),h=Hq.Yk(a.En,Hq.je(d,b.En)),k=Dr.Yk(a.qn,Dr.je(c,b.qn)),l=Hq.Yk(a.Rm,Hq.je(c,b.Rm)),n=this.cells.Yk(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Yk(a.attrs,this.attrs.je({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Fn:g,En:h,qn:k,Rm:l,cells:n,attrs:a}}Hh(a,b){return a===b?!0:this.rows.Hh(a.rows,b.rows)&&Dr.Hh(a.Fn,b.Fn)&&Hq.Hh(a.En,b.En)&&Dr.Hh(a.qn,b.qn)&&Hq.Hh(a.Rm,b.Rm)&&this.cols.Hh(a.cols,
b.cols)&&this.cells.Hh(a.cells,b.cells)&&this.attrs.Hh(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof Wxb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var Xxb=class extends Rq{static F(a){gb(a,{ndd:Kp})}get ndd(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return Lq(this,this.refs.get(a))}forEach(a){for(const [b,c]of this.refs)a(Lq(this,c),b)}create(a,b){a=this.domain.replace(a,this.get(a),b);this.jq(a)}update(a,b){const c=m(Lq(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.jq(a)}delete(a){const b=Lq(this,this.refs.get(a));b!=null&&(a=this.domain.replace(a,b,void 0),this.jq(a))}iT(){const a=this.domain.$f();for(const [b,
c]of this.refs)a.ordinal(b,Lq(this,c));return a.build()}destroy(a){la(this.refs.size===a.size);for(const [b,c]of this.refs)la(a.has(b)),la(Lq(this,c)===a.get(b))}pi(a){const b=this.domain.hg();for(const [c,d]of this.refs){const e=Lq(this,d),f=a.get(c);Eq(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Eq(b,c,void 0,d);this.jq(b.build());return!0}zZ(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.ld();for(var d=b.head;d;)d.type===
0?c+=b.zy(d.length):(d=mq(b,d.length),this.items.spliceWithArray(c,0,Array(d)),c+=d),d=b.head}for(const [e,f]of a.Lj)switch(f.type){case 0:f.oldValue!=null?(a=m(this.refs.get(e)),c=Tsb(this,f.oldValue),ka(a===c)):ka(!this.refs.has(e));f.newValue!=null?this.refs.set(e,Tsb(this,f.newValue)):this.refs.delete(e);break;case 1:a=m(this.refs.get(e));c=Tsb(this,f.oldValue);ka(a===c);this.refs.set(e,Tsb(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();this.domain=(Xxb.F(this),Hq);this.items=
Nq.array([],{deep:!1});this.refs=Nq.map(new Map,{deep:!1});for(const [b,c]of a)this.refs.set(b,Tsb(this,c))}},Yxb=class extends Qq{By(a){return new Xxb(a)}Cm(a){return a}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){return this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(){super(Pq,qp);this.domain=__c.Hq}},Er=new Yxb;var Zxb=class{create(a,b){a=Fq(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(c==null&&d==null){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.hg();for(const [e,f]of b)Eq(a,e,c.get(e),f);c.jq(a.build())}}get(a){var b=Fq(a);a=this.base.get(b.start);b=this.base.get(b.end);if(a!=null&&b!=null)return{start:a,end:Math.max(a,b)}}forEach(a){const b=new Set;this.base.forEach((c,d)=>{c=Lsb(d);b.has(c)||(b.add(c),d=m(this.get(c)),a(d,c))})}delete(a){var b=Fq(a);a=this.base;
var c=new Set([b.start,b.end]);b=a.domain.hg();for(const d of c)c=a.get(d),c!=null&&Eq(b,d,c);a.jq(b.build())}constructor(a){this.base=a}},$xb=Er.map(Ssb,Osb,Nsb,Msb,a=>new Zxb(a),a=>a.base),ayb=class extends Ntb{By(a){a=Er.By(Msb(a));return new Zxb(a)}connect(a,b){return $xb.connect(a,b)}Xb(a){return $xb.Xb(a)}destroy(a,b){return $xb.destroy(a,b)}pi(a,b){return $xb.pi(a,b)}constructor(){super();this.domain=__c.Dr}},Fr=new ayb;var fyb,dyb,eyb,byb,cyb;
fyb=class extends Rq{iT(){return{rows:this.gQb.Xb(this.rows),cols:this.ryb.Xb(this.cols),Fn:Fr.Xb(this.Fn.Ae),En:Er.Xb(this.En.Lj),qn:Fr.Xb(this.qn.Ae),Rm:Er.Xb(this.Rm.Lj),cells:this.Qxb.Xb(this.cells.grid),attrs:this.uwb.Xb(this.attrs.grid)}}destroy(a){vp(this.gQb,a.rows,this.dCd,this.rows);vp(this.ryb,a.cols,this.UBd,this.cols);vp(Fr,a.Fn,this.FEc,this.Fn.Ae);vp(Er,a.En,this.EEc,this.En.Lj);vp(Fr,a.qn,this.CEc,this.qn.Ae);vp(Er,a.Rm,this.BEc,this.Rm.Lj);vp(this.Qxb,a.cells,this.dUb,this.cells.grid);
vp(this.uwb,a.attrs,this.cUb,this.attrs.grid)}pi(a){return this.gQb.pi(this.rows,a.rows)&&this.ryb.pi(this.cols,a.cols)&&Fr.pi(this.Fn.Ae,a.Fn)&&Er.pi(this.En.Lj,a.En)&&Fr.pi(this.qn.Ae,a.qn)&&Er.pi(this.Rm.Lj,a.Rm)&&this.Qxb.pi(this.cells.grid,a.cells)&&this.uwb.pi(this.attrs.grid,a.attrs)}zZ(a){const b=Jq(a.rows),c=Jq(a.cols);this.dCd.next(a.rows);this.UBd.next(a.cols);this.FEc.next(Dr.je(b,a.Fn));this.EEc.next(Hq.je(b,a.En));this.CEc.next(Dr.je(c,a.qn));this.BEc.next(Hq.je(c,a.Rm));this.dUb.next(this.domain.cells.je({...a.cells,
y:b,x:c}));this.cUb.next(this.domain.attrs.je({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.gQb=a;this.ryb=b;this.Qxb=c;this.uwb=d;this.domain=e;this.j2=g=>this.rows.has(g)?this.rows.bM(g):void 0;this.w_=g=>this.cols.has(g)?this.cols.bM(g):void 0;this.exa=g=>this.rows.get(g);this.dxa=g=>this.cols.get(g);this.NEb=()=>{var g=this.rows.last();if(g==null)return 0;g=this.j2(g);return g!=null?g+1:0};this.hEb=()=>{var g=this.cols.last();if(g==null)return 0;g=this.w_(g);return g!=null?g+1:
0};this.eqe=tp(this,g=>{const h=Jq(g);qq.isIdentity(h)||(this.dUb.next(this.domain.cells.je({y:h})),this.cUb.next(this.domain.attrs.je({y:h})),this.EEc.next(Hq.je(h,new Map)),this.FEc.next(Dr.je(h,new Map)));return this.domain.je({rows:g})});a=up(this.gQb,f.rows,this.eqe);this.rows=a.mutable;this.dCd=a.bw;this.$pe=tp(this,g=>{const h=Jq(g);qq.isIdentity(h)||(this.dUb.next(this.domain.cells.je({x:h})),this.cUb.next(this.domain.attrs.je({x:h})),this.BEc.next(Hq.je(h,new Map)),this.CEc.next(Dr.je(h,
new Map)));return this.domain.je({cols:g})});a=up(this.ryb,f.cols,this.$pe);this.cols=a.mutable;this.UBd=a.bw;this.cqe=tp(this,g=>{ka(qq.isIdentity(g.axis));return this.domain.je({En:g.Lj})});a=up(Er,f.En,this.cqe);this.En=new byb(a.mutable,this.j2,this.exa);this.EEc=a.bw;this.dqe=tp(this,g=>{ka(qq.isIdentity(g.axis));return this.domain.je({Fn:g.Ae})});a=up(Fr,f.Fn,this.dqe);this.Fn=new cyb(a.mutable,this.j2,this.exa);this.FEc=a.bw;this.Ype=tp(this,g=>{ka(qq.isIdentity(g.axis));return this.domain.je({Rm:g.Lj})});
a=up(Er,f.Rm,this.Ype);this.Rm=new byb(a.mutable,this.w_,this.dxa);this.BEc=a.bw;this.Zpe=tp(this,g=>{ka(qq.isIdentity(g.axis));return this.domain.je({qn:g.Ae})});a=up(Fr,f.qn,this.Zpe);this.qn=new cyb(a.mutable,this.w_,this.dxa);this.CEc=a.bw;this.Xpe=tp(this,g=>{ka(qq.isIdentity(g.x));ka(qq.isIdentity(g.y));return this.domain.je({cells:g})});a=up(this.Qxb,f.cells,this.Xpe);this.cells=new dyb(a.mutable,this.j2,this.w_,this.exa,this.dxa,this.NEb,this.hEb);this.dUb=a.bw;this.Vpe=tp(this,g=>{ka(qq.isIdentity(g.x));
ka(qq.isIdentity(g.y));return this.domain.je({attrs:g})});f=up(this.uwb,f.attrs,this.Vpe);this.attrs=new eyb(f.mutable,this.j2,this.w_,this.exa,this.dxa,this.NEb,this.hEb);this.cUb=f.bw}};
dyb=class{get(a,b){a=this.j2(a);b=this.w_(b);if(a!=null&&b!=null&&(b=this.grid.get(a,b),b!=null))return{span:{cg:m(Usb(this,b.span)),Zf:m(Vsb(this,b.span)),Ak:m(Wsb(this,b.span)),Ej:m(Xsb(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=Usb(this,c),e=Vsb(this,c);d!=null&&e!=null&&a(b,{cg:d,Zf:e,Ak:m(Wsb(this,c)),Ej:m(Xsb(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(Ysb(this,a),b);return m(this.get(a.cg,a.Zf))}delete(a){this.grid.delete(Ysb(this,
a))}constructor(a,b,c,d,e,f,g){this.grid=a;this.j2=b;this.w_=c;this.exa=d;this.dxa=e;this.NEb=f;this.hEb=g}};eyb=class{get(a,b,c){b=this.j2(b);c=this.w_(c);if(b!=null&&c!=null)return this.grid.get(a,b,c)}set(a,b,c){const d=this.j2(b.cg),e=this.w_(b.Zf),f=this.j2(b.Ak||b.cg);b=this.w_(b.Ej||b.Zf);d!=null&&e!=null&&f!=null&&b!=null&&this.grid.set(a,{j6e:d,W5e:e,RBb:f,Rke:b},c)}constructor(a,b,c,d,e,f,g){this.grid=a;this.j2=b;this.w_=c;this.exa=d;this.dxa=e;this.NEb=f;this.hEb=g}};
byb=class{get(a){a=this.Lj.get(a);if(a!=null)for(;a>=0;a--){const b=this.VFb(a);if(b)return b}}forEach(a){this.Lj.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){b=m(this.eIb(b));this.Lj.create(a,b)}delete(a){this.Lj.delete(a)}constructor(a,b,c){this.Lj=a;this.eIb=b;this.VFb=c}};
cyb=class{get(a){a=this.Ae.get(a);if(a!=null){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.VFb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.VFb(c);if(d){a=d;break a}}a=void 0}if(b!=null&&a!=null)return{start:b,end:a}}}forEach(a){this.Ae.forEach((b,c)=>{(b=this.get(c))&&a(b,c)})}create(a,b){const c=m(this.eIb(b.start));b=m(this.eIb(b.end));this.Ae.create(a,{start:c,end:b})}delete(a){this.Ae.delete(a)}constructor(a,b,c){this.Ae=a;this.eIb=b;this.VFb=c}};
__c.jyb=class extends Qq{By(a){return new fyb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}Cm(a){return a}connect(a,b){return this.Cm(a).connect(b)}Xb(a){return this.Cm(a).Xb()}destroy(a,b){this.Cm(a).destroy(b)}pi(a,b){return this.Cm(a).pi(b)}constructor(a){var b=gyb,c=hyb,d=__c.iyb;super(Pq,Pq);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new Wxb(b.domain,c.domain,a.domain,d.domain)}};__c.jyb.prototype.Dz=ea(145);__c.kyb=class{static parse(a){a==="dd mmm yyyy"&&(a="dd MMM yyyy");const b=new __c.kyb;if((a=b.i8e(a))&&a.s===""&&b.isValid())return a.value}isValid(){return this.J8b<=1&&this.goc<=1&&this.LKc<=1&&this.J8b+this.goc+this.LKc!==0}Gr(a){return b=>{var c=a.exec(b);if(c&&c.index===0)return[c]=c,{s:b.substring(c.length),value:[{type:0,value:c}]}}}compose(a,...b){return c=>{const d=[];for(const e of b){const f=e(c);if(!f)return;c=f.s;d.push(...f.value)}return{s:c,value:a(...d)}}}constructor(){this.LKc=this.goc=
this.J8b=0;this.bde=this.compose(a=>{a=a.value;this.J8b++;la(a==="d"||a==="dd");return[{type:1,value:a}]},this.Gr(/^d{1,2}(?!d)/));this.rJe=this.compose(a=>{a=a.value;this.goc++;switch(a){case "M":case "MM":case "MMM":case "MMMM":return[{type:1,value:a}];default:la(!1)}},this.Gr(/^M{1,4}(?!M)/));this.agf=this.compose(a=>{a=a.value;this.LKc++;la(a==="yyyy"||a==="yy");return[{type:1,value:a}]},this.Gr(/^(yyyy|yy)(?!y)/));this.f_c=this.Gr(/^"/);this.sTe=this.Gr(/^[^\\"]+/);this.separator=this.Gr(/^[^a-zA-Z\\"]+/);
this.symbol=Zsb(this.bde,this.rJe,this.agf);this.LKe=$sb(Zsb(this.symbol,this.separator));this.i8e=$sb(Zsb(this.compose((a,b)=>[b],this.f_c,this.sTe,this.f_c),this.LKe))}};var lyb,myb,nyb,oyb,pyb,qyb,ryb,syb,tyb,uyb,vyb,wyb,xyb,yyb,Cyb,Dyb,Eyb,Fyb,Gyb,Iyb,Kyb,Lyb,Myb,Nyb,Oyb,Pyb,Qyb,Ryb,Syb,Tyb,Uyb,Vyb,Xyb,Yyb,Zyb,$yb,azb,bzb,czb,ezb,fzb,gzb,hzb,izb,jzb,lzb,mzb,gyb,hyb,nzb,ozb,pzb,qzb,rzb,szb,tzb,uzb,vzb,wzb,xzb,Czb,Dzb,Ezb,Fzb,Gzb,Izb,Kzb;lyb=Bp(/^([A-Z]+|[1-9]\d*)$/);myb=Bp(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/);nyb=zp({type:xp("single-row"),Jia:Uq,anb:lyb});oyb=zp({type:xp("single-column"),AFa:Uq,anb:lyb});pyb=zp({type:xp("range-row"),$Na:Uq,anb:myb});
qyb=zp({type:xp("range-column"),BFa:Uq,anb:myb});ryb=yp(__c.Ap({"single-row":nyb,"single-column":oyb,"range-row":pyb,"range-column":qyb},a=>a.type));syb=zp({type:xp("canonical"),O9a:Uq,Gb:ryb});tyb=zp({type:xp("invalid"),ewc:Uq});uyb=Jp(zp({type:xp("formula"),value:__c.Ap({canonical:syb,invalid:tyb},a=>a.type)}));vyb=Jp(zp({type:xp("boolean"),value:Tq}));wyb=wp(a=>a.length<=20&&__c.kyb.parse(a)!=null);
xyb=Jp(zp({type:xp("number"),value:wp(a=>Number.isFinite(a)&&(Math.abs(a)>=2.2250738585072014E-308||Object.is(a,0)))}));yyb=Jp(zp({type:xp("plaintext"),value:Uq}));__c.zyb=Mp({attributes:{F9:Hp(bwb)},Gb:{fill:__c.vr}});__c.Ayb=Op(__c.zyb);__c.Byb=Mp({values:{type:xp("media")},Gb:{value:__c.Ayb}});Cyb=Op(Jp(ewb));Dyb=Mp({values:{type:xp("mention")},Gb:{value:Cyb}});Eyb=zp({embed:fwb});Fyb=Op(Jp(Eyb));Gyb=Mp({values:{type:xp("embed")},Gb:{value:Fyb}});__c.Hyb=new __c.qr;
Iyb=Mp({values:{type:xp("text2")},attributes:{Pc:Fp(exb)},Gb:{value:__c.Hyb}});__c.Jyb=new __c.qr;Kyb=Mp({values:{type:xp("text3")},Gb:{value:__c.Jyb}});Lyb={formula:uyb,boolean:vyb,number:xyb,plaintext:yyb,media:__c.Byb,mention:Dyb,embed:Gyb};Myb=bq(Lyb,a=>a.type,a=>a.type);Nyb=bq({...Lyb,text2:Iyb},a=>a.type,a=>a.type);Oyb=bq({...Lyb,text3:Kyb},a=>a.type,a=>a.type);Pyb=bq({...Lyb,text2:Iyb},a=>a.type,a=>a.type);Qyb=zp({type:xp("plain"),format:Uq});Ryb=zp({type:xp("currency"),format:Uq});
Syb=zp({type:xp("percentage"),format:Uq});Tyb=zp({type:xp("date"),format:wyb});Uyb=__c.Ap({plain:Qyb,currency:Ryb,percentage:Syb,date:Tyb},a=>a.type);Vyb=Jp(zp({type:xp("plain_number"),wj:Qyb}));__c.Wyb=Jp(zp({type:xp("currency"),wj:Ryb}));Xyb=Jp(zp({type:xp("percentage"),wj:Syb}));Yyb=Jp(zp({type:xp("date"),wj:Tyb}));Zyb=Mp({attributes:{label:__c.ar},Gb:{fill:__c.vr}});$yb=Op(Zyb);azb=Mp({values:{type:xp("select")},attributes:{wj:Hp(Uyb)},Gb:{options:$yb}});bzb=Jp(zp({type:xp("mention")}));czb=Jp(zp({type:xp("embed")}));
__c.dzb=bq({plain_number:Vyb,currency:__c.Wyb,percentage:Xyb,date:Yyb,select:azb,mention:bzb,embed:czb},a=>a.type,a=>a.type);ezb=a=>Mp({attributes:{yk:__c.fr},Gb:{content:Gp(Ep(a)),Ic:Gp(Ep(__c.dzb))}});fzb=ezb(Myb);
gzb={static:{fontFamily:xr.fontFamily,fontSize:xr.fontSize,fontWeight:xr.fontWeight,fontStyle:xr.fontStyle,EL:xr.EL,verticalAlign:xr.verticalAlign,color:xr.color,km:xr.km,rw:xr.rw,link:xr.link,letterSpacing:xr.letterSpacing,lineHeight:xr.lineHeight,direction:xr.direction,Px:xr.Px,CG:xr.CG},nVa:{},Du:{}};__c.Gr=__c.Yrb(gzb);
hzb={Ila:jq("block",rtb,"inherit"),Hla:jq("block",rtb,"inherit"),Kla:jq("block",rtb,"inherit"),Jla:jq("block",rtb,"inherit"),Dla:jq("block",ptb,"inherit"),Cla:jq("block",ptb,"inherit"),Fla:jq("block",ptb,"inherit"),Ela:jq("block",ptb,"inherit"),p9a:jq("block",ttb,"inherit"),o9a:jq("block",ttb,"inherit"),r9a:jq("block",ttb,"inherit"),q9a:jq("block",ttb,"inherit")};izb=["auto",...$wb];
jzb={static:{...gzb.static,MW:jq("block",otb,"#ffffff"),...hzb,textAlign:kq("block",izb),Ax:kq("block",["overflow","wrap","clip"]),Nk:kq("block",["middle","start","end"])},nVa:{},Du:{}};__c.zr=__c.Yrb(jzb);__c.iyb=new uxb;__c.kzb=__c.iyb.domain.ON();lzb=Mp({values:{id:Uq},attributes:{height:fub,minHeight:__c.er}});mzb=Mp({values:{id:Uq},attributes:{width:fub}});Op(lzb);Op(mzb);gyb=new __c.grb(lzb,qqb(lzb.Yra));hyb=new __c.grb(mzb,qqb(mzb.Yra));nzb=Mp({values:{Jia:Uq,AFa:Uq,vge:Tq}});ozb=__c.Ip(nzb);
pzb=Mp({values:{type:xp("replace")},attributes:{zk:Fp(nwb),$Na:__c.ar,BFa:__c.ar}});qzb=bq({replace:pzb},a=>a.type,a=>a.type);rzb=Op(qzb);szb=ezb(Nyb);tzb=ezb(Oyb);uzb=ezb(Pyb);vzb=new Lxb(szb);wzb=new Lxb(tzb);xzb=new Lxb(uzb);__c.yzb=(new Lxb(fzb)).domain.ON();__c.zzb=new __c.jyb(vzb);__c.Azb=new __c.jyb(wzb);__c.Bzb=new __c.jyb(xzb);Czb=Mp({attributes:{Lua:__c.gr,H2a:__c.gr}});Dzb=Mp({Gb:{freeze:Czb}});
Ezb=a=>Mp({Gb:{DP:a,hk:ozb,Ir:__c.wr,view:Dzb,F4:rzb},attributes:{direction:Fp(xp("ltr","rtl")),PL:br}});Fzb=a=>a.Nh({computed:{attributes:{width:void 0,height:void 0},Gb:{layout:void 0,rows:void 0,cols:void 0,Knb:void 0,m$a:void 0,G2a:void 0,JTa:void 0,i2:void 0,v_:void 0,zc:void 0,Ac:void 0},create:b=>btb(b)}});Gzb=Ezb(__c.zzb);__c.Hzb=Fzb(Gzb);Izb=Ezb(__c.Azb);__c.Jzb=Fzb(Izb);Kzb=Ezb(__c.Bzb);__c.Lzb=Fzb(Kzb);
}).call(self, self._88e79ef67272193100c646da570c27cc);}

}])
//# sourceMappingURL=sourcemaps/e602d618ac2a1f55.js.map